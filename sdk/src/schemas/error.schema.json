{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://vib3.dev/schemas/error.json",
  "title": "VIB3+ Error Schema",
  "description": "Actionable error format for agentic API consumption",
  "type": "object",
  "properties": {
    "error": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "ValidationError",
            "RenderError",
            "ResourceError",
            "SystemError",
            "ConfigurationError",
            "NotFoundError",
            "PermissionError"
          ],
          "description": "Error category"
        },
        "code": {
          "type": "string",
          "pattern": "^[A-Z_]+$",
          "description": "Machine-readable error code",
          "examples": [
            "INVALID_GEOMETRY_INDEX",
            "INVALID_ROTATION_PLANE",
            "WEBGL_CONTEXT_LOST",
            "SYSTEM_NOT_INITIALIZED",
            "PARAMETER_OUT_OF_RANGE"
          ]
        },
        "message": {
          "type": "string",
          "description": "Human-readable error description"
        },
        "parameter": {
          "type": "string",
          "description": "The parameter that caused the error, if applicable"
        },
        "provided_value": {
          "description": "The invalid value that was provided"
        },
        "valid_options": {
          "type": "array",
          "description": "List of valid options for enum-type errors"
        },
        "valid_range": {
          "type": "object",
          "properties": {
            "min": { "type": "number" },
            "max": { "type": "number" }
          },
          "description": "Valid range for numeric errors"
        },
        "suggestion": {
          "type": "string",
          "description": "Actionable suggestion for the agent to fix the error"
        },
        "documentation_url": {
          "type": "string",
          "format": "uri",
          "description": "Link to relevant documentation"
        },
        "retry_possible": {
          "type": "boolean",
          "description": "Whether retrying the operation might succeed",
          "default": false
        },
        "retry_after_ms": {
          "type": "integer",
          "description": "Suggested wait time before retry, in milliseconds"
        }
      },
      "required": ["type", "code", "message"],
      "additionalProperties": false
    }
  },
  "required": ["error"],
  "additionalProperties": false
}
