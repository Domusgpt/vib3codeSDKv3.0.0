import{Q as Kt,R as Jt,F as te}from"./FacetedSystem-PaU9wK_B.js";class ee{constructor(e=2){this.max=e,this.slots=new Map}has(e){return this.slots.has(e)}get(e){var t;return((t=this.slots.get(e))==null?void 0:t.adapter)||null}acquire(e,t,o,s){if(this.slots.has(e))return this.slots.get(e).adapter;for(;this.slots.size>=this.max;){const r=this.slots.keys().next().value;this.release(r)}this._resetCanvas(t);try{const r=new o(t,s);return r.active?(this.slots.set(e,{adapter:r,canvasId:t}),r):(console.warn(`[ContextPool] ${e} init failed on #${t}`),null)}catch(r){return console.warn(`[ContextPool] ${e} threw:`,r),null}}release(e){const t=this.slots.get(e);if(t){try{t.adapter.dispose()}catch{}this._loseContext(t.canvasId),this.slots.delete(e)}}releaseAll(){for(const e of[...this.slots.keys()])this.release(e)}_loseContext(e){const t=document.getElementById(e);if(t)try{const o=t.getContext("webgl2")||t.getContext("webgl");if(o&&!o.isContextLost()){const s=o.getExtension("WEBGL_lose_context");s&&s.loseContext()}}catch{}}_resetCanvas(e){const t=document.getElementById(e);if(!t)return;const o=t.parentElement;o&&o._vib3Layers&&(o._vib3Layers.forEach(a=>{try{const l=a.getContext("webgl2")||a.getContext("webgl");if(l&&!l.isContextLost()){const i=l.getExtension("WEBGL_lose_context");i&&i.loseContext()}}catch{}a.remove()}),o._vib3Layers=null),t.style.display="",this._loseContext(e);const s=document.createElement("canvas");s.id=e,s.className=t.className,t.style.cssText&&(s.style.cssText=t.style.cssText);const r=t.parentElement;if(r){const a=Math.min(devicePixelRatio||1,2);s.width=r.clientWidth*a,s.height=r.clientHeight*a}t.parentNode.replaceChild(s,t)}}const Bt={geometry:3,hue:200,gridDensity:24,speed:1,morphFactor:.5,chaos:.2,intensity:.7,saturation:.8,rot4dXW:0,rot4dYW:0,rot4dZW:0,rot4dXY:0,rot4dXZ:0,rot4dYZ:0,dimension:3.5},oe=[{role:"background",zIndex:1,opacity:.35},{role:"shadow",zIndex:2,opacity:.25},{role:"content",zIndex:3,opacity:.95},{role:"highlight",zIndex:4,opacity:.6},{role:"accent",zIndex:5,opacity:.5}];function zt(n){const e=document.getElementById(n);if(!e)return null;const t=e.parentElement;if(!t)return null;const o=Math.min(devicePixelRatio||1,2),s=t.clientWidth*o,r=t.clientHeight*o;e.style.display="none";const a={},l=[];return oe.forEach(({role:i,zIndex:c,opacity:d})=>{const p=document.createElement("canvas");p.className="vib3-canvas vib3-layer",p.dataset.role=i,p.dataset.parentId=n,p.width=s,p.height=r,p.style.cssText=`
      display: block; position: absolute; top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: ${c};
      opacity: ${d};
      pointer-events: ${i==="content"?"auto":"none"};
    `,t.appendChild(p),a[i]=p,l.push(p)}),t._vib3Layers=l,t._vib3Placeholder=e,a}function bt(n){const e=document.getElementById(n);if(!e)return;const t=e.parentElement;t&&(t._vib3Layers&&(t._vib3Layers.forEach(o=>{try{const s=o.getContext("webgl2")||o.getContext("webgl");if(s&&!s.isContextLost()){const r=s.getExtension("WEBGL_lose_context");r&&r.loseContext()}}catch{}o.remove()}),t._vib3Layers=null),e.style.display="")}function se(n,e,t){const o={};return o.mouse=s=>{const r=n.getBoundingClientRect();e((s.clientX-r.left)/r.width,(s.clientY-r.top)/r.height,.8)},o.touch=s=>{if(!s.touches.length)return;const r=s.touches[0],a=n.getBoundingClientRect();e((r.clientX-a.left)/a.width,(r.clientY-a.top)/a.height,.9)},o.leave=()=>t(),n.addEventListener("mousemove",o.mouse),n.addEventListener("touchmove",o.touch,{passive:!0}),n.addEventListener("mouseleave",o.leave),o}function ne(n,e){!n||!e||(n.removeEventListener("mousemove",e.mouse),n.removeEventListener("touchmove",e.touch),n.removeEventListener("mouseleave",e.leave))}function Ft(n,e){const t=n.parentElement||n;if(!t)return null;const o=new ResizeObserver(()=>{e(t.clientWidth,t.clientHeight,Math.min(devicePixelRatio||1,2))});return o.observe(t),o}class H{constructor(e,t={}){this.canvasId=e,this.active=!0,this.params={...Bt,...t};const o=zt(e);if(!o){this.active=!1;return}this._layerCanvases=o,this.canvas=o.content;try{this.engine=new Kt({canvases:o,autoStart:!0}),this.engine.setActive(!0),this.engine.updateParameters(this.params)}catch(s){console.warn("Quantum 5-layer init failed",s),this.active=!1,bt(e);return}this._handlers=se(this.canvas,(s,r,a)=>this.engine.updateInteraction(s,r,a),()=>this.engine.updateInteraction(.5,.5,0)),this._resizeObs=Ft(this.canvas,(s,r,a)=>{this.engine.resize(s,r,a),Object.values(this._layerCanvases).forEach(l=>{l.width=s*a,l.height=r*a})})}setParam(e,t){var o;this.params[e]=t,(o=this.engine)==null||o.updateParameter(e,t)}setParams(e){var t;Object.assign(this.params,e),(t=this.engine)==null||t.updateParameters(e)}render(){var e;this.active&&((e=this.engine)==null||e.updateParameters(this.params))}dispose(){var e,t;this.active=!1,ne(this.canvas,this._handlers),(e=this._resizeObs)==null||e.disconnect();try{(t=this.engine)==null||t.dispose()}catch{}bt(this.canvasId)}}class ot{constructor(e,t={}){this.canvasId=e,this.active=!0,this.params={...Bt,...t};const o=zt(e);if(!o){this.active=!1;return}this._layerCanvases=o,this.canvas=o.content;try{this.system=new Jt({canvases:o}),this.system.setActive(!0);for(const[s,r]of Object.entries(this.params))this.system.updateParameter(s,r)}catch(s){console.warn("Holographic 5-layer init failed",s),this.active=!1,bt(e);return}this._resizeObs=Ft(this.canvas,(s,r,a)=>{this.system.resize(s,r,a),Object.values(this._layerCanvases).forEach(l=>{l.width=s*a,l.height=r*a})})}setParam(e,t){var o;this.params[e]=t,(o=this.system)==null||o.updateParameter(e,t)}setParams(e){var t;Object.assign(this.params,e);for(const[o,s]of Object.entries(e))(t=this.system)==null||t.updateParameter(o,s)}render(){var e;if(this.active)for(const[t,o]of Object.entries(this.params))(e=this.system)==null||e.updateParameter(t,o)}dispose(){var e,t;this.active=!1,(e=this._resizeObs)==null||e.disconnect();try{(t=this.system)==null||t.dispose()}catch{}bt(this.canvasId)}}class st{constructor(e,t={}){const o=document.getElementById(e);if(!o){this.active=!1;return}this.canvas=o,this.canvasId=e,this.params={...Bt,...t};try{if(this.faceted=new te,this.faceted.initDirect(o))this.active=!0,this.faceted.updateParameters(this.params);else{console.warn("Faceted initDirect failed"),this.active=!1;return}}catch(s){console.warn("Faceted init error",s),this.active=!1;return}this._resizeObs=Ft(o,(s,r,a)=>this.faceted.resize(s,r,a))}setParam(e,t){var o;this.params[e]=t,(o=this.faceted)==null||o.updateParameters({[e]:t})}setParams(e){var t;Object.assign(this.params,e),(t=this.faceted)==null||t.updateParameters(e)}render(){var e;this.active&&((e=this.faceted)==null||e.updateParameters(this.params))}dispose(){var e,t,o;this.active=!1,(e=this._resizeObs)==null||e.disconnect();try{(t=this.faceted)==null||t.stop(),(o=this.faceted)==null||o.dispose()}catch{}}}class re{constructor(e,t={}){if(this.canvas=document.getElementById(e),!this.canvas){this.active=!1;return}this.ctx=this.canvas.getContext("2d"),this.active=!0,this.params={geometry:3,hue:180,gridDensity:24,speed:1,morphFactor:.5,chaos:.2,intensity:.7,rot4dXW:0,rot4dYW:0,rot4dZW:0,dimension:3.5,saturation:.8,...t},this.resize(),this._ro=new ResizeObserver(()=>this.resize()),this._ro.observe(this.canvas.parentElement)}resize(){if(!this.canvas)return;const e=this.canvas.parentElement,t=Math.min(devicePixelRatio||1,2);this.canvas.width=e.clientWidth*t,this.canvas.height=e.clientHeight*t,this.w=this.canvas.width,this.h=this.canvas.height}setParam(e,t){this.params[e]=t}setParams(e){Object.assign(this.params,e)}render(e){if(!this.active||!this.ctx)return;const{ctx:t,w:o,h:s,params:r}=this,a=e*r.speed*.001,l=Math.floor(r.geometry)%24,i=l%8,c=Math.floor(l/8),d=o/2,p=s/2,m=Math.max(o,s)*.55,u=Math.max(4,Math.floor(r.gridDensity)),y=r.dimension||3.5,h=Math.round((r.saturation??.8)*100),v=r.mouseX??.5,w=r.mouseY??.5,b=(v-.5)*.3;t.globalCompositeOperation="source-over",t.globalAlpha=1;const f=Math.max(o,s)*.85,S=t.createRadialGradient(d+(v-.5)*o*.2,p+(w-.5)*s*.2,0,d,p,f);S.addColorStop(0,`hsla(${r.hue}, ${h}%, 12%, 1)`),S.addColorStop(.4,`hsla(${(r.hue+20)%360}, ${h}%, 6%, 1)`),S.addColorStop(1,`hsla(${(r.hue+40)%360}, ${Math.max(0,h-20)}%, 2%, 1)`),t.fillStyle=S,t.fillRect(0,0,o,s);const I=.25+r.intensity*.35;for(let T=0;T<4;T++){const x=a*.12+T*1.57+(r.rot4dZW||0)*.5+b,$=m*(.7+Math.sin(a*.25+T*1.2)*.4),F=d+Math.cos(x)*m*.35,k=p+Math.sin(x)*m*.3,W=t.createRadialGradient(F,k,0,F,k,$),_=(r.hue+T*80+c*50)%360;W.addColorStop(0,`hsla(${_}, ${h}%, 50%, ${I})`),W.addColorStop(.3,`hsla(${_}, ${Math.max(0,h-10)}%, 35%, ${I*.6})`),W.addColorStop(.7,`hsla(${(_+30)%360}, ${h}%, 20%, ${I*.2})`),W.addColorStop(1,`hsla(${_}, ${h}%, 10%, 0)`),t.fillStyle=W,t.fillRect(0,0,o,s)}t.globalAlpha=Math.min(1,r.intensity*1.2);const L=Math.ceil(u/2);for(let T=0;T<u;T++){const x=T/u,$=x*Math.PI*2+a+(r.rot4dXW||0)+b*2,F=(r.hue+x*120+c*60)%360,k=Math.sin(a*.5+x*3.14+(r.rot4dYW||0))*.4,W=1/(y-k),_=.45+r.chaos*.4+r.intensity*.15,Y=.12+r.chaos*.15+(T<L?.08:0);if(t.strokeStyle=`hsla(${F}, ${h}%, 65%, ${_})`,t.fillStyle=`hsla(${F}, ${Math.max(0,h-5)}%, 45%, ${Y})`,t.lineWidth=2+r.morphFactor*1.5+(T===0?1.5:0),t.beginPath(),this._drawGeometry(t,i,d,p,m,W,x,$,a,o,s,r),t.fill(),t.stroke(),c>0&&T%2===0){const z=(F+180)%360;if(t.strokeStyle=`hsla(${z}, ${h}%, 60%, ${.25+r.chaos*.25})`,t.lineWidth=1.5+r.morphFactor*.8,t.beginPath(),c===1){const X=m*x*W*1.2,Z=Math.sin(a+x*5+(r.rot4dZW||0))*m*.08;t.arc(d+Z,p-Z*.7,Math.max(3,X),0,Math.PI*2)}else{for(let X=0;X<5;X++){const Z=x*Math.PI*2/5*X+a*.3+(r.rot4dZW||0),Q=m*(.35+x*.35)*W;X===0?t.moveTo(d+Math.cos(Z)*Q,p+Math.sin(Z)*Q):t.lineTo(d+Math.cos(Z)*Q,p+Math.sin(Z)*Q)}t.closePath()}t.stroke()}}t.globalCompositeOperation="lighter",t.globalAlpha=Math.min(1,r.intensity*.8);const C=m*(.55+Math.sin(a*.7)*.2),E=t.createRadialGradient(d+(v-.5)*m*.3,p+(w-.5)*m*.3,0,d,p,C),R=(r.hue+Math.sin(a*.3)*30)%360;E.addColorStop(0,`hsla(${R}, ${h}%, 65%, ${.3+r.chaos*.2})`),E.addColorStop(.4,`hsla(${R}, ${h}%, 45%, ${.12+r.chaos*.1})`),E.addColorStop(1,`hsla(${R}, ${h}%, 20%, 0)`),t.fillStyle=E,t.fillRect(0,0,o,s);const P=Math.min(12,Math.floor(u/2));for(let T=0;T<P;T++){const x=T/P,$=x*Math.PI*2+a*.8+(r.rot4dXW||0),F=Math.sin(a*.5+x*3.14+(r.rot4dYW||0))*.4,k=1/(y-F),W=(r.hue+x*120+c*60)%360,_=d+Math.cos($)*m*(.2+x*.6)*k,Y=p+Math.sin($)*m*(.2+x*.6)*k,z=5+r.morphFactor*6+Math.sin(a*2+x*10)*3,X=t.createRadialGradient(_,Y,0,_,Y,z*4);X.addColorStop(0,`hsla(${W}, ${h}%, 80%, 0.6)`),X.addColorStop(.25,`hsla(${W}, ${h}%, 60%, 0.25)`),X.addColorStop(1,`hsla(${W}, ${h}%, 40%, 0)`),t.fillStyle=X,t.fillRect(_-z*4,Y-z*4,z*8,z*8)}t.globalCompositeOperation="source-over",t.globalAlpha=Math.min(1,r.intensity*.9);const O=Math.min(u,16);for(let T=0;T<O;T++){const x=T/O,$=x*Math.PI*2+a*1.1+(r.rot4dXW||0)*1.2,F=(r.hue+x*80+30)%360,k=Math.sin(a*.5+x*3.14+(r.rot4dYW||0))*.4,W=1/(y-k);t.strokeStyle=`hsla(${F}, ${Math.min(100,h+15)}%, 78%, ${.35+r.chaos*.3})`,t.lineWidth=.8+r.morphFactor*.5,t.beginPath(),this._drawGeometry(t,i,d,p,m*.92,W,x,$+.1,a,o,s,r),t.stroke()}t.globalCompositeOperation="source-over",t.globalAlpha=1}_drawGeometry(e,t,o,s,r,a,l,i,c,d,p,m){switch(t){case 0:{const u=3+Math.floor(m.morphFactor);for(let y=0;y<=u;y++){const h=i+y*(Math.PI*2/u),v=r*(.3+l*.7)*a;y===0?e.moveTo(o+Math.cos(h)*v,s+Math.sin(h)*v):e.lineTo(o+Math.cos(h)*v,s+Math.sin(h)*v)}e.closePath();break}case 1:{const u=r*(.2+l*.6)*a,y=c*.3+l*.5+(m.rot4dXW||0);e.save(),e.translate(o,s),e.rotate(y),e.rect(-u/2,-u/2,u,u);const h=u*.55,v=Math.sin(c+l*2)*u*.15;e.rect(-h/2+v,-h/2+v,h,h),e.restore();break}case 2:{const u=Math.sin(c+l*2)*r*.05,y=Math.cos(c+l*2)*r*.05;e.arc(o+u,s+y,Math.max(2,r*l*a),0,Math.PI*2);break}case 3:{const u=r*.5*a,y=r*(.15+l*.15),h=o+Math.cos(i)*u,v=s+Math.sin(i)*u;e.arc(h,v,Math.max(2,y*a),0,Math.PI*2);break}case 4:for(let u=0;u<=48;u++){const y=u/48*Math.PI*2,h=r*(.3+.15*Math.sin(y*2+c))*a,v=1+.4*Math.sin(y*3+c*1.5),w=o+Math.cos(y+i)*h*v,b=s+Math.sin(y+i)*h;u===0?e.moveTo(w,b):e.lineTo(w,b)}e.closePath();break;case 5:{const u=r*.5*a,y=i+c*.2,h=1+Math.floor(m.morphFactor*2);this._fractalTriangle(e,o,s,u*(.3+l*.7),y,h);break}case 6:for(let u=0;u<d;u+=3){const y=u/d,h=Math.sin(y*m.gridDensity*.5+c+l*3),v=Math.sin(y*m.gridDensity*.3-c*.7+l*5)*.5,w=s+(h+v)*r*.25*a*(.5+l);u===0?e.moveTo(u,w):e.lineTo(u,w)}break;case 7:{const u=r*.45*a,y=i+l*.5;for(let h=0;h<8;h++){const v=y+h*Math.PI/4,w=u*(.4+l*.6)*(h%2===0?1:.6);if(e.moveTo(o,s),e.lineTo(o+Math.cos(v)*w,s+Math.sin(v)*w),h>0){const b=y+(h-1)*Math.PI/4,f=u*(.4+l*.6)*((h-1)%2===0?1:.6);e.moveTo(o+Math.cos(b)*f*.7,s+Math.sin(b)*f*.7),e.lineTo(o+Math.cos(v)*w*.7,s+Math.sin(v)*w*.7)}}break}}}_fractalTriangle(e,t,o,s,r,a){if(a<=0||s<3){for(let l=0;l<3;l++){const i=r+l*2.094;l===0?e.moveTo(t+Math.cos(i)*s,o+Math.sin(i)*s):e.lineTo(t+Math.cos(i)*s,o+Math.sin(i)*s)}e.closePath();return}for(let l=0;l<3;l++){const i=r+l*2.094;l===0?e.moveTo(t+Math.cos(i)*s,o+Math.sin(i)*s):e.lineTo(t+Math.cos(i)*s,o+Math.sin(i)*s)}e.closePath();for(let l=0;l<3;l++){const i=r+l*2.094;this._fractalTriangle(e,t+Math.cos(i)*s*.5,o+Math.sin(i)*s*.5,s*.45,r+.2,a-1)}}dispose(){var e;this.active=!1,(e=this._ro)==null||e.disconnect()}}class ae{constructor(e={}){this.maxTilt=e.maxTilt||15,this.perspective=e.perspective||1200,this.smoothing=e.smoothing||.12,this.returnSpeed=e.returnSpeed||.06,this.cards=new Map,this._active=!0,this._rafId=null,this._scrollY=0,this._scrollVelocity=0,this._lastScrollTime=0,this._initScrollTracking(),this._startLoop()}register(e,t=null,o={}){if(!e||this.cards.has(e))return;const s={el:e,adapter:t,cfg:{maxTilt:o.maxTilt??this.maxTilt,perspective:o.perspective??this.perspective,sensitivity:o.sensitivity??1,affectsRotation:o.affectsRotation!==!1,affectsSpeed:o.affectsSpeed??!1,affectsChaos:o.affectsChaos??!1,affectsDensity:o.affectsDensity??!1,affectsHue:o.affectsHue??!1,rotationScale:o.rotationScale??1.2,speedScale:o.speedScale??.4,chaosScale:o.chaosScale??.25,densityScale:o.densityScale??.25,hueScale:o.hueScale??25},tx:0,ty:0,gx:0,gy:0,hovering:!1,programmatic:!1},r=()=>{s.hovering=!0},a=()=>{s.hovering=!1,s.programmatic||(s.gx=0,s.gy=0)},l=c=>{if(s.programmatic)return;const d=e.getBoundingClientRect();s.gx=((c.clientX-d.left)/d.width*2-1)*s.cfg.sensitivity,s.gy=((c.clientY-d.top)/d.height*2-1)*s.cfg.sensitivity},i=c=>{if(s.programmatic||!c.touches.length)return;s.hovering=!0;const d=c.touches[0],p=e.getBoundingClientRect();s.gx=((d.clientX-p.left)/p.width*2-1)*s.cfg.sensitivity,s.gy=((d.clientY-p.top)/p.height*2-1)*s.cfg.sensitivity};return s._h={onEnter:r,onLeave:a,onMove:l,onTouchMove:i},e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",a),e.addEventListener("mousemove",l),e.addEventListener("touchmove",i,{passive:!0}),e.addEventListener("touchend",a),e.style.transformStyle="preserve-3d",this.cards.set(e,s),s}unregister(e){const t=this.cards.get(e);if(!t)return;const o=t._h;e.removeEventListener("mouseenter",o.onEnter),e.removeEventListener("mouseleave",o.onLeave),e.removeEventListener("mousemove",o.onMove),e.removeEventListener("touchmove",o.onTouchMove),e.removeEventListener("touchend",o.onLeave),e.style.transform="",this.cards.delete(e)}setAdapter(e,t){const o=this.cards.get(e);o&&(o.adapter=t)}setTilt(e,t,o){const s=this.cards.get(e);s&&(s.programmatic=!0,s.gx=t,s.gy=o)}releaseTilt(e){const t=this.cards.get(e);t&&(t.programmatic=!1,t.hovering||(t.gx=0,t.gy=0))}_initScrollTracking(){let e=window.scrollY||0;const t=()=>{const o=performance.now(),s=o-this._lastScrollTime,r=window.scrollY||0;if(s>0){const a=(r-e)/(s/1e3);this._scrollVelocity+=(a-this._scrollVelocity)*.15}e=r,this._scrollY=r,this._lastScrollTime=o};window.addEventListener("scroll",t,{passive:!0})}_startLoop(){const e=()=>{this._active&&(this._update(),this._rafId=requestAnimationFrame(e))};this._rafId=requestAnimationFrame(e)}_update(){for(const e of this.cards.values()){const t=e.hovering||e.programmatic?this.smoothing:this.returnSpeed;e.tx+=(e.gx-e.tx)*t,e.ty+=(e.gy-e.ty)*t,!e.hovering&&!e.programmatic&&Math.abs(e.tx)<.002&&Math.abs(e.ty)<.002&&(e.tx=0,e.ty=0),this._css(e),this._params(e)}}_css(e){const{el:t,tx:o,ty:s,cfg:r}=e,a=o*r.maxTilt,l=-s*r.maxTilt,i=t.dataset.scrollTransform||"",c=Math.max(-8,Math.min(8,this._scrollVelocity*.002)),d=Math.max(-12,Math.min(12,this._scrollVelocity*.003)),p=l+c;t.style.transform=`perspective(${r.perspective}px) rotateX(${p.toFixed(2)}deg) rotateY(${a.toFixed(2)}deg) translateY(${d.toFixed(1)}px) ${i}`;const m=Math.min(1,Math.sqrt(o*o+s*s));t.style.setProperty("--tilt-x",o.toFixed(3)),t.style.setProperty("--tilt-y",s.toFixed(3)),t.style.setProperty("--tilt-intensity",m.toFixed(3)),t.style.setProperty("--tilt-angle",`${(Math.atan2(s,o)*180/Math.PI).toFixed(1)}deg`),t.style.setProperty("--specular-x",`${((o+1)*50).toFixed(1)}%`),t.style.setProperty("--specular-y",`${((s+1)*50).toFixed(1)}%`)}_params(e){var d,p,m,u,y;const{adapter:t,tx:o,ty:s,cfg:r}=e;if(!t||!t.active)return;const a=Math.min(1,Math.sqrt(o*o+s*s)),l=Math.min(1,Math.abs(this._scrollVelocity)/3e3),i=Math.max(a,l);if(i<.01)return;const c={};if(r.affectsRotation){c.rot4dXY=s*r.rotationScale,c.rot4dXZ=o*r.rotationScale;const h=l*r.rotationScale*.5;c.rot4dYW=(((d=t.params)==null?void 0:d.rot4dYW)||0)+o*r.rotationScale*.3+h}if(r.affectsSpeed){const h=1+i*r.speedScale;c.speed=(((p=t.params)==null?void 0:p.speed)||1)*h}if(r.affectsChaos){const h=((m=t.params)==null?void 0:m.chaos)??.2;c.chaos=Math.min(1,h+i*r.chaosScale)}if(r.affectsDensity){const h=((u=t.params)==null?void 0:u.gridDensity)??24;c.gridDensity=Math.max(4,h*(1-i*r.densityScale))}if(r.affectsHue){const h=((y=t.params)==null?void 0:y.hue)??200;c.hue=(h+o*r.hueScale+360)%360}t.setParams(c)}dispose(){this._active=!1,this._rafId&&cancelAnimationFrame(this._rafId);for(const e of[...this.cards.keys()])this.unregister(e)}}const ie={geometry:11,hue:210,gridDensity:28,speed:.4,intensity:.75,chaos:.05,morphFactor:.6,rot4dXW:.15,rot4dYW:.08,dimension:3.6,saturation:.9},vt=[{name:"Emergence",sub:"A lattice awakens in four dimensions",geometry:3,hue:200,gridDensity:10,speed:.25,chaos:.03,intensity:.55,morphFactor:.3,dimension:3.9,rot4dXW:.1,rot4dYW:0,rot4dZW:0},{name:"Dimensional Shift",sub:"Projections ripple through hyperspace",geometry:11,hue:270,gridDensity:14,speed:.5,chaos:.12,intensity:.7,morphFactor:.6,dimension:3.5,rot4dXW:.8,rot4dYW:.3,rot4dZW:0},{name:"Three Voices",sub:"Quantum · Holographic · Faceted",geometry:4,hue:310,gridDensity:8,speed:.9,chaos:.25,intensity:.8,morphFactor:.8,dimension:3.4,rot4dXW:1.2,rot4dYW:.6,rot4dZW:.3},{name:"Convergence",sub:"All engines synchronize",geometry:16,hue:45,gridDensity:38,speed:.55,chaos:.04,intensity:.88,morphFactor:1.1,dimension:3.2,rot4dXW:2,rot4dYW:1,rot4dZW:.5},{name:"Spectral Rupture",sub:"The fourth dimension breaks through",geometry:5,hue:0,gridDensity:5,speed:2.2,chaos:.75,intensity:.95,morphFactor:1.6,dimension:3,rot4dXW:4,rot4dYW:2.5,rot4dZW:1.8},{name:"Resolution",sub:"Settled into crystalline order",geometry:7,hue:180,gridDensity:24,speed:.45,chaos:.08,intensity:.7,morphFactor:.5,dimension:3.6,rot4dXW:.5,rot4dYW:.2,rot4dZW:0}],Dt=[{geometry:3,hue:195,gridDensity:24,speed:.5,intensity:.8,chaos:.08,morphFactor:.5,dimension:3.5,saturation:.85},{geometry:4,hue:310,gridDensity:18,speed:.4,intensity:.85,chaos:.12,morphFactor:.4,dimension:3.7,saturation:.9},{geometry:1,hue:45,gridDensity:32,speed:.6,intensity:.75,chaos:.03,morphFactor:.8,dimension:3.4,saturation:.8}],kt={geometry:7,hue:180,gridDensity:26,speed:.6,intensity:.65,chaos:.08,morphFactor:.7,dimension:3.5,saturation:.85},ce={geometry:3,hue:200,gridDensity:24,speed:1,morphFactor:.5,chaos:.2,intensity:.7,dimension:3.5,rot4dXW:0,rot4dYW:0,rot4dZW:0,rot4dXY:0,rot4dXZ:0,rot4dYZ:0},St={geometry:11,hue:220,gridDensity:22,speed:.3,intensity:.5,chaos:.05,morphFactor:.6,dimension:3.8,rot4dXW:.1,rot4dYW:.05,saturation:.85},$t={left:{geometry:2,hue:195,gridDensity:22,speed:.4,intensity:.65,chaos:.15,morphFactor:.6,dimension:3.5,saturation:.85},right:{geometry:4,hue:310,gridDensity:18,speed:.5,intensity:.65,chaos:.2,morphFactor:.7,dimension:3.4,saturation:.9}},le=[H,ot,st];let dt=-1,lt=!1,Xt=-1;function M(n){return n*n*(3-2*n)}function g(n,e,t){return n+(e-n)*t}function q(n){return Math.max(0,Math.min(1,n))}function gt(n,e){n&&(n.style.setProperty("--shadow-sx",g(1.4,.7,e).toFixed(2)),n.style.setProperty("--shadow-sy",g(.3,1.1,e).toFixed(2)),n.style.setProperty("--shadow-blur",g(18,4,e)+"px"),n.style.setProperty("--shadow-opacity",g(.15,.55,e).toFixed(2)))}function tt(n,e){if(!n)return;const t=q(1-(e-4)/52);n.style.setProperty("--vignette-strength",g(.08,.45,t).toFixed(2)),n.style.setProperty("--vignette-inner",g(55,30,t)+"%")}function Zt(n,e){if(!n||!(e!=null&&e.params))return;const t=Math.abs(e.params.rot4dXW||0)+Math.abs(e.params.rot4dYW||0),o=Math.min(4,t*.4),s=e.params.hue||200;n.style.setProperty("--chroma-offset",o+"px"),n.style.setProperty("--chroma-hue-a",Math.round(s-30)),n.style.setProperty("--chroma-hue-b",Math.round(s+30))}function Mt(n,e,t){var i,c,d,p;if(!n)return;const o=((i=e==null?void 0:e.params)==null?void 0:i.chaos)||0,s=((c=t==null?void 0:t.params)==null?void 0:c.chaos)||0,r=(o+s)*3+o*s*10,a=Math.min(.9,r),l=((((d=e==null?void 0:e.params)==null?void 0:d.hue)||200)+(((p=t==null?void 0:t.params)==null?void 0:p.hue)||200))/2;n.style.setProperty("--seam-intensity",a.toFixed(2)),n.style.setProperty("--seam-hue",Math.round(l)),n.style.setProperty("--seam-blur",g(8,2,a)+"px")}function de(n,e){n&&n.querySelectorAll(".scanline").forEach((t,o)=>{const s=(e*2+o/3)%1*100;t.style.setProperty("--scan-y",s+"%"),t.style.setProperty("--scan-hue",Math.round(200+e*160))})}function he(n,e){const t=Math.pow(n,3);e.setParams({speed:.3+t*2.5,chaos:.05+t*.65,intensity:.4+t*.5,gridDensity:20+t*35})}function ge(n,e){const t=1-Math.pow(1-n,3);e.setParams({speed:2.8-t*2.5,chaos:.7-t*.65,intensity:.9-t*.5,gridDensity:55-t*35})}function pe(n,e,t){const o=M(t);return{geometry:t<.5?n.geometry:e.geometry,hue:g(n.hue,e.hue,o),gridDensity:g(n.gridDensity,e.gridDensity,o),speed:g(n.speed,e.speed,o),chaos:g(n.chaos,e.chaos,o),intensity:g(n.intensity,e.intensity,o),morphFactor:g(n.morphFactor,e.morphFactor,o),dimension:g(n.dimension,e.dimension,o),rot4dXW:g(n.rot4dXW,e.rot4dXW,o),rot4dYW:g(n.rot4dYW,e.rot4dYW,o),rot4dZW:g(n.rot4dZW,e.rot4dZW,o)}}function Lt(n,e){n.has("morph")&&n.release("morph");const t=Dt[e]||Dt[0],o=n.acquire("morph","morph-canvas",le[e],t);return dt=o?e:-1,o}function ue(n,e){if(e===dt||lt)return;lt=!0;const t=document.getElementById("morphFlash"),o=setTimeout(()=>{lt=!1},1e3);gsap.to(t,{opacity:.85,duration:.08,ease:"power2.in",onComplete:()=>{Lt(n,e),requestAnimationFrame(()=>{requestAnimationFrame(()=>{gsap.to(t,{opacity:0,duration:.2,ease:"power2.out",onComplete:()=>{clearTimeout(o),lt=!1}})})})}})}function It(n){if(n===Xt)return;Xt=n;const e=vt[n],t=document.getElementById("morphTitle"),o=document.getElementById("morphSub"),s=document.getElementById("morphCounter");t&&gsap.to(t,{opacity:0,y:-15,duration:.2,ease:"power2.in",onComplete:()=>{t.textContent=e.name,gsap.to(t,{opacity:1,y:0,duration:.5,ease:"power3.out"})}}),o&&gsap.to(o,{opacity:0,y:-8,duration:.15,ease:"power2.in",onComplete:()=>{o.textContent=e.sub,gsap.to(o,{opacity:1,y:0,duration:.4,delay:.1,ease:"power2.out"})}}),s&&(s.innerHTML=`<span class="current">0${n+1}</span> / 06`),document.querySelectorAll(".morph-dot").forEach((r,a)=>{r.classList.toggle("active",a===n)})}function me(){gsap.to("#scrollProgress",{scaleX:1,ease:"none",scrollTrigger:{trigger:document.body,start:"top top",end:"bottom bottom",scrub:.1}})}function ye(n,e){const t=document.getElementById("openingOverlay"),o=document.querySelectorAll(".opening-char"),s=document.getElementById("lattice1"),r=document.getElementById("lattice2"),a=document.getElementById("lattice3"),l=document.querySelector(".opening-sub span");ScrollTrigger.create({trigger:"#openingSection",start:"top top",end:"bottom bottom",pin:"#openingPinned",scrub:.6,onEnter:()=>{n.acquire("opening","opening-canvas",H,St)},onLeave:()=>{n.release("opening")},onEnterBack:()=>{n.release("hero"),n.acquire("opening","opening-canvas",H,St)},onLeaveBack:()=>{n.release("opening")},onUpdate:i=>{const c=i.progress,d=n.get("opening"),p=document.getElementById("openingVignette"),m=document.getElementById("openingScanlines"),u=document.getElementById("openingCanvasWrap");if(d){const S=Math.sin(c*Math.PI*6);let I,L,C,E,R;if(c<.15){const P=c/.15;I=g(60,45,M(P)),L=g(0,.3,M(P)),C=g(.05,.2,P),E=4.3,R=.02}else if(c<.55){const P=(c-.15)/.4;I=g(45,14,M(P)),L=g(.3,.75,M(P)),C=g(.2,.9,P),E=g(4.3,3.3,P),R=g(.02,.25,M(P))}else if(c<.75){const P=(c-.55)/.2,O=Math.sin(P*Math.PI*3)*.3;I=14+O*8,L=.75+O*.1,C=.9+O*.3,E=3.3+O*.2,R=.25+Math.abs(O)*.15}else if(c<.95){const P=(c-.75)/.2;I=g(14,50,M(P)),L=g(.75,.15,M(P)),C=g(.9,.1,P),E=g(3.3,4.3,P),R=g(.25,.02,M(P))}else{const P=(c-.95)/.05;I=g(50,60,P),L=g(.15,0,P),C=.05,E=4.5,R=0}if(d.setParams({intensity:L,rot4dXW:c*Math.PI*4,rot4dYW:Math.sin(c*Math.PI*2)*2,rot4dZW:c*Math.PI*.8,hue:220+c*100+S*15,gridDensity:I,chaos:R,speed:C,morphFactor:.6+Math.sin(c*Math.PI*2)*.4,dimension:E,geometry:c<.2?11:c<.5?3:c<.75?4:7}),u){const P=q(1-(I-4)/52);u.style.transform=`scale(${g(.85,1.1,P)})`}tt(p,I),de(m,c)}const y=q((c-.12)/.22),h=M(q((c-.74)/.22));o.forEach((S,I)=>{const L=q((y-I*.07)/.14),C=M(L);gsap.set(S,{opacity:C*(1-h),y:(1-C)*80+h*-60,scale:.7+C*.3-h*.1,rotationX:(1-C)*12})});const v=M(q((c-.28)/.2)),w=M(q((c-.74)/.2));if(t&&(t.style.opacity=v*(1-w)),l){const S=M(q((c-.36)/.08)),I=M(q((c-.68)/.08));gsap.set(l,{opacity:S*(1-I),y:(1-S)*20})}const b=q((c-.45)/.3),f=q((c-.82)/.15);if(s){const S=g(b*6,Math.round(b*6/15)*15,M(f));gsap.set(s,{opacity:M(b)*.7*(1-M(q((c-.92)/.08))),rotation:S,x:(1-M(b))*-120,y:(b-.5)*-50})}if(r){const S=g(-b*4+2,Math.round((-b*4+2)/12)*12,M(f));gsap.set(r,{opacity:M(q((b-.1)/.9))*.55*(1-M(q((c-.92)/.08))),rotation:S,x:(1-M(b))*100,y:(b-.5)*-35})}if(a){const S=g(b*9,Math.round(b*9/18)*18,M(f));gsap.set(a,{opacity:M(q((b-.2)/.8))*.4*(1-M(q((c-.9)/.1))),rotation:S,y:(b-.5)*-70})}}})}function fe(){ScrollTrigger.create({trigger:document.body,start:"top top",end:"bottom bottom",scrub:.5,onUpdate:n=>{const e=n.progress,t=Math.round(210+e*140);document.documentElement.style.setProperty("--scroll-hue",t)}})}function ve(){document.querySelectorAll(".blur-reveal").forEach(n=>{ScrollTrigger.create({trigger:n,start:"top 85%",once:!0,onEnter:()=>n.classList.add("revealed")})})}function be(n){ScrollTrigger.create({trigger:".hero",start:"top 80%",end:"bottom top",onEnter:()=>{n.has("hero")||n.acquire("hero","hero-canvas",H,{geometry:11,hue:210,gridDensity:28,speed:.4,intensity:.75,chaos:.05,morphFactor:.6,rot4dXW:.15,rot4dYW:.08,dimension:3.6,saturation:.9})},onEnterBack:()=>{n.has("hero")||n.acquire("hero","hero-canvas",H,{geometry:11,hue:210,gridDensity:28,speed:.4,intensity:.75,chaos:.05,morphFactor:.6,rot4dXW:.15,rot4dYW:.08,dimension:3.6,saturation:.9})}});const e=gsap.timeline({delay:.2});e.to("#heroBadge",{opacity:1,y:0,duration:1,ease:"power3.out"});const t=document.getElementById("heroTitle");if(t){const o=t.textContent;t.innerHTML=o.split("").map(r=>r===" "?" ":`<span class="char">${r}</span>`).join("");const s=t.querySelectorAll(".char");s.forEach(r=>{gsap.set(r,{y:80+Math.random()*60,opacity:0})}),e.to(s,{opacity:1,y:0,duration:.8,stagger:.06,ease:"power4.out"},"-=0.5")}e.to("#heroSub",{opacity:1,y:0,duration:.9,ease:"power2.out"},"-=0.3"),e.to("#heroSystemLabel",{opacity:1,duration:.6},"-=0.4"),e.to("#heroScroll",{opacity:1,duration:.8},"-=0.2"),ScrollTrigger.create({trigger:".hero",start:"top top",end:"bottom top",scrub:.3,onUpdate:o=>{const s=o.progress,r=n.get("hero");if(!r)return;const a=M(s),l=q((s-.4)/.6),i=q((s-.7)/.3);r.setParams({rot4dXY:a*.4,rot4dXZ:a*.25,rot4dXW:l*Math.PI*1.5,rot4dYW:l*Math.PI*.8,rot4dZW:i*Math.PI*1.2,geometry:s<.25?3:s<.55?2:s<.8?4:6,gridDensity:28+a*36+Math.sin(s*Math.PI*6)*8,hue:210+a*80+Math.sin(s*Math.PI*4)*20,chaos:.05+l*.4+i*.2,intensity:.75+a*.2+i*.05,morphFactor:.6+a*1.2,dimension:3.6-a*.5,saturation:.9+l*.1})}}),gsap.to("#heroContent",{opacity:0,y:-150,ease:"none",scrollTrigger:{trigger:".hero",start:"25% top",end:"bottom top",scrub:1}}),gsap.to("#heroScroll",{opacity:0,ease:"none",scrollTrigger:{trigger:".hero",start:"10% top",end:"25% top",scrub:.3}})}function Se(n,e){const t=document.getElementById("morphCard");document.getElementById("morphGlow");const o=document.querySelectorAll(".morph-voice"),s=document.getElementById("morphProgressFill"),r=vt.length;ScrollTrigger.create({trigger:"#morphSection",start:"top top",end:"bottom bottom",pin:"#morphPinned",scrub:.6,onEnter:()=>{n.release("hero"),n.release("opening"),Lt(n,0),It(0)},onLeave:()=>{n.release("morph"),dt=-1},onEnterBack:()=>{Lt(n,2),It(5)},onLeaveBack:()=>{n.release("morph"),dt=-1,e()},onUpdate:a=>{const l=a.progress;s&&(s.style.width=`${l*100}%`);const i=l*r,c=Math.min(Math.floor(i),r-1),d=i-c;It(c);const p=c<2?0:c<4?1:2;p!==dt&&!lt&&ue(n,p);const m=Math.min(c+1,r-1),u=pe(vt[c],vt[m],d),y=Math.sin(l*Math.PI*8),h=Math.sin(d*Math.PI);u.hue+=y*15,u.gridDensity+=h*4,u.rot4dXW+=Math.sin(l*Math.PI*3)*.3,u.intensity+=h*.05;const v=n.get("morph");v&&v.setParams(u);const w=document.getElementById("morphShadow");if(Zt(t,v),t){const b=u.hue;if(t.style.setProperty("--morph-glow",`hsla(${b}, 70%, 50%, ${.08+u.chaos*.2})`),c===0){const f=M(d);gsap.set(t,{width:g(80,120,f),height:g(80,120,f),borderRadius:"50%",scale:f,x:"-50%",y:"-50%"}),t.classList.toggle("glowing",d>.3)}else if(c===1){const f=M(d);gsap.set(t,{width:g(120,340,f),height:g(120,220,f),borderRadius:g(50,24,f)+"%",scale:1,x:"-50%",y:"-50%"}),t.classList.add("glowing"),gt(w,M(d)*.5)}else if(c===2)gsap.set(t,{width:340,height:220,borderRadius:"24px",scale:1,x:"-50%",y:"-50%"}),o.forEach((f,S)=>{const I=S*.08,L=d>.15+I;gsap.to(f,{opacity:L?1:0,y:L?0:30,scale:L?1:.8,duration:.4,ease:"power3.out"})});else if(c===3){const f=M(d);gsap.set(t,{width:g(340,500,f),height:g(220,350,f),borderRadius:"24px",scale:1,x:"-50%",y:"-50%"}),v&&v.setParam("gridDensity",u.gridDensity*g(1,.7,f)),o.forEach(S=>{gsap.to(S,{opacity:0,y:-20,scale:.8,duration:.3,ease:"power2.in"})})}else if(c===4){const f=M(d),S=g(500,window.innerWidth*.85,f),I=g(350,window.innerHeight*.75,f);gsap.set(t,{width:S,height:I,borderRadius:g(24,16,f)+"px",scale:1,x:"-50%",y:"-50%"}),t.classList.add("glowing"),v&&v.setParam("gridDensity",u.gridDensity*g(.7,.3,f)),v&&(v.setParam("speed",u.speed*g(1,1.5,f)),v.setParam("chaos",u.chaos*g(1,1.3,f))),gt(w,.5+f*.5)}else{const f=M(d);gsap.set(t,{width:g(window.innerWidth*.85,380,f),height:g(window.innerHeight*.75,240,f),borderRadius:g(16,24,f)+"px",scale:1,x:"-50%",y:"-50%"}),t.classList.toggle("glowing",d<.7),v&&v.setParam("gridDensity",u.gridDensity*g(.3,1,f))}}}})}function Me(n){const e=document.getElementById("triptychLeft"),t=document.getElementById("triptychRight"),o={...$t.left,hue:280,geometry:3,intensity:.6,gridDensity:20,chaos:.1,speed:.5,saturation:.75},s=()=>{n.acquire("triLeft","tri-left-canvas",H,$t.left),n.acquire("triCenter","tri-center-canvas",ot,o),n.acquire("triRight","tri-right-canvas",st,$t.right)},r=()=>{n.release("triLeft"),n.release("triCenter"),n.release("triRight")};ScrollTrigger.create({trigger:"#triptychSection",start:"top 90%",end:"bottom top",onEnter:s,onLeave:r,onEnterBack:s,onLeaveBack:r});const a=document.getElementById("triptychCenter"),l=document.getElementById("triSeamLeft"),i=document.getElementById("triSeamRight"),c=document.getElementById("triVignetteLeft"),d=document.getElementById("triVignetteCenter"),p=document.getElementById("triVignetteRight"),m=document.getElementById("triShadowLeft"),u=document.getElementById("triShadowRight");ScrollTrigger.create({trigger:"#triptychSection",start:"top bottom",end:"bottom top",scrub:.5,onUpdate:y=>{const h=y.progress,v=document.documentElement,b=((parseFloat(v.style.getPropertyValue("--mouse-x")||"50%")||50)/100-.5)*6,f=34+(h-.5)*12+b,S=66+(h-.5)*12+b,I=Math.max(0,1-Math.abs(h-.5)*4),L=g(f,33.33,I*.5),C=g(S,66.66,I*.5);e&&(e.style.clipPath=`inset(0 ${100-L}% 0 0)`),a&&(a.style.clipPath=`inset(0 ${100-C}% 0 ${L}%)`),t&&(t.style.clipPath=`inset(0 0 0 ${C}%)`),v.style.setProperty("--tri-split-left",`${L}%`),v.style.setProperty("--tri-split-right",`${C}%`);let E,R,P;if(h<.3){const A=h/.3;E=g(.9,.85,A),R=.5,P=g(.15,.2,A)}else if(h<.5){const A=(h-.3)/.2,N=M(A);E=g(.85,.15,N),R=.5+Math.sin(A*Math.PI)*.2,P=g(.2,.9,N)}else if(h<.7){const A=(h-.5)/.2;E=g(.15,.15,A),R=.5,P=g(.9,.85,A)}else if(h<.85){const A=(h-.7)/.15,N=M(A);E=g(.15,.55,N),R=g(.5,.55,N),P=g(.85,.55,N)}else{const A=(h-.85)/.15,N=M(A);E=R=P=g(.55,.1,N)}const O=(A,N)=>{if(!A)return;const Qt=g(.88,1.12,N),_t=g(3,0,N);A.style.transform=`translateY(${(h-.5)*g(-40,-120,N)}px) scale(${Qt})`,A.style.filter=_t>.5?`blur(${_t}px)`:"none"};O(e,E),O(t,P),gt(m,E),gt(u,P);const T=A=>g(50,8,A);tt(c,T(E)),tt(d,T(R)),tt(p,T(P));const x=Math.sin(h*Math.PI*2),$=Math.sin(h*Math.PI),F=I,k=200+h*160,W=k%360+F*((k+120)%360-k%360)*.6,_=(k+120)%360,Y=(k+240)%360+F*((k+120)%360-(k+240)%360)*.6,z=T(E)+x*4,X=T(R)+x*6,Z=T(P)+x*4,Q=g(.3,.85,E)+x*.1,at=g(.35,.8,R)+$*.15,ut=g(.3,.85,P)-x*.08,nt=h*Math.PI*4,it=h*Math.PI,J=Math.sin(it*2)*Math.PI+nt*.3,B=nt+Math.PI*2/3,V=Math.sin(it*3)*Math.PI+nt*.3,U=.1+E*.3+F*.2,ct=.4+U*.8+F*.8,Ut=.6+ct*.3,Rt=.4+$*.6+F*1,wt=h>.35&&h<.5?Math.sin((h-.35)/.15*Math.PI)*.35:0,xt=n.get("triLeft");xt&&xt.setParams({geometry:h<.3?2:h<.6?3:h<.85?10:7,hue:W,rot4dXW:J,rot4dYW:Math.sin(h*Math.PI*2)*2,rot4dZW:h*Math.PI*.6,gridDensity:Math.max(6,Math.min(55,z)),intensity:Math.min(.95,Q),chaos:U+wt,morphFactor:.6+Math.sin(h*Math.PI*2)*.4,speed:Rt*g(.7,1.3,E),saturation:.85+$*.1});const mt=n.get("triCenter");mt&&mt.setParams({geometry:h<.2?3:h<.4?11:h<.6?6:h<.8?2:10,hue:_,rot4dXW:B,rot4dYW:Math.cos(h*Math.PI*2)*1.5+x*.5,rot4dZW:-h*Math.PI*.3+x*.4,gridDensity:Math.max(6,Math.min(55,X)),intensity:Math.min(.95,at),chaos:.1+F*.4+$*.1+wt,morphFactor:.5+F*.8+x*.3,speed:ct,saturation:.75+F*.2});const Et=n.get("triRight");Et&&Et.setParams({geometry:h<.25?12:h<.5?4:h<.75?20:5,hue:Y,rot4dXW:V,rot4dYW:Math.cos(h*Math.PI*2)*1.8,rot4dZW:-h*Math.PI*.4,gridDensity:Math.max(6,Math.min(55,Z)),intensity:Math.min(.95,ut),chaos:.15+P*.2-F*.1+wt,morphFactor:Ut,speed:Rt*g(.7,1.3,P)*.9,saturation:.9+$*.08}),Mt(l,xt,mt),Mt(i,mt,Et)}})}function Pe(n,e){const t=document.querySelectorAll(".cascade-card"),o=document.getElementById("cascadeTrack"),s=document.getElementById("cascadeGpuLeft"),r=document.getElementById("cascadeGpuRight");ScrollTrigger.create({trigger:"#cascadeSection",start:"top 90%",end:"bottom top",onEnter:()=>{n.acquire("casGpuL","cascade-gpu-left",H,{geometry:2,hue:200,gridDensity:20,speed:.5,intensity:.55,chaos:.15,dimension:3.5,morphFactor:.6,saturation:.85}),n.acquire("casGpuR","cascade-gpu-right",ot,{geometry:4,hue:320,gridDensity:18,speed:.4,intensity:.5,chaos:.12,dimension:3.6,morphFactor:.7,saturation:.8})},onLeave:()=>{n.release("casGpuL"),n.release("casGpuR")},onEnterBack:()=>{n.acquire("casGpuL","cascade-gpu-left",H,{geometry:2,hue:200,gridDensity:20,speed:.5,intensity:.55,chaos:.15,dimension:3.5,morphFactor:.6,saturation:.85}),n.acquire("casGpuR","cascade-gpu-right",ot,{geometry:4,hue:320,gridDensity:18,speed:.4,intensity:.5,chaos:.12,dimension:3.6,morphFactor:.7,saturation:.8})},onLeaveBack:()=>{n.release("casGpuL"),n.release("casGpuR")}});const a={rect:[[2,2],[50,0],[98,2],[100,50],[98,98],[50,100],[2,98],[0,50]],hex:[[25,2],[75,2],[98,25],[98,75],[75,98],[25,98],[2,75],[2,25]],diamond:[[50,2],[80,20],[98,50],[80,80],[50,98],[20,80],[2,50],[20,20]],oct:[[28,2],[72,2],[98,28],[98,72],[72,98],[28,98],[2,72],[2,28]]};function l(c,d,p){return"polygon("+c.map((m,u)=>`${m[0]+(d[u][0]-m[0])*p}% ${m[1]+(d[u][1]-m[1])*p}%`).join(", ")+")"}const i=[a.rect,a.hex,a.diamond,a.oct,a.rect];if(t.forEach(c=>{c.style.setProperty("--card-hue",c.dataset.hue)}),ScrollTrigger.create({trigger:"#cascadeSection",start:"top 75%",once:!0,onEnter:()=>{gsap.to(".cascade-card",{opacity:1,y:0,duration:.9,stagger:.15,ease:"power3.out"})}}),t.forEach((c,d)=>{c.addEventListener("mouseenter",()=>{const p=e.get(`cas${d}`);p&&p.setParams({speed:1.8,chaos:.5,intensity:.95})}),c.addEventListener("mousemove",p=>{const m=e.get(`cas${d}`);if(!m)return;const u=c.getBoundingClientRect(),y=(p.clientX-u.left)/u.width,h=(p.clientY-u.top)/u.height;m.setParam("mouseX",y),m.setParam("mouseY",h)}),c.addEventListener("mouseleave",()=>{const p=e.get(`cas${d}`);p&&p.setParams({speed:.7,chaos:.18,intensity:.85,mouseX:.5,mouseY:.5})})}),ScrollTrigger.create({trigger:"#cascadeSection",start:"top 80%",once:!0,onEnter:()=>{gsap.from(".cascade-header",{y:40,opacity:0,duration:.8,ease:"power2.out"})}}),o&&t.length>0){const c=t.length;ScrollTrigger.create({trigger:"#cascadeSection",start:"top top",end:"bottom bottom",pin:"#cascadePinned",scrub:.5,onUpdate:d=>{var x;const p=d.progress,u=80*(window.innerWidth/100),y=(c-1)*u;o.style.transform=`translateX(${-p*y}px)`;const h=Math.min(Math.floor(p*c),c-1),v=parseInt(t[h].dataset.hue),w=p*c-h,b=Math.sin(w*Math.PI),f=p*Math.PI*3,S=n.get("casGpuL"),I=n.get("casGpuR"),L=document.getElementById("cascadeSeam"),C=document.getElementById("cascadeVignette"),E=t[h],R=parseInt((E==null?void 0:E.dataset.geo)||"0"),P=parseInt((E==null?void 0:E.dataset.hue)||"200"),O=b;S&&S.setParams({geometry:R,hue:P,rot4dXW:f,rot4dYW:Math.sin(p*Math.PI*2)*1.5,gridDensity:g(14,50,O),intensity:g(.55,.2,O),chaos:.1+b*.25,speed:.4+b*.8,morphFactor:.5+w*.6}),I&&I.setParams({geometry:(R+16)%24,hue:(P+180)%360,rot4dXW:-f*.7,rot4dYW:Math.cos(p*Math.PI*2)*1.2,gridDensity:g(18,52,O),intensity:g(.45,.18,O),chaos:.12+(1-b)*.2,speed:.3+(1-b)*.6,morphFactor:.7-w*.3});const T=30+h/Math.max(1,c-1)*40;s&&(s.style.clipPath=`inset(0 ${100-T}% 0 0)`),r&&(r.style.clipPath=`inset(0 0 0 ${T}%)`),Mt(L,S,I),L&&(L.style.left=`${T}%`),C&&tt(C,((x=S==null?void 0:S.params)==null?void 0:x.gridDensity)||20),t.forEach(($,F)=>{const k=e.get(`cas${F}`);if(!k)return;const W=parseInt($.dataset.hue),_=Math.abs(F-h),Y=Math.max(0,1-_*.3)*b,z=_*Math.PI/3,X=F===h;let Z,Q,at;if(X)Z=(1-b)*(w<.5?-15:15),Q=-b*3,at=(1-b)*(w<.5?-2:2);else{const B=F<h?1:-1,V=Math.min(_*18,50);Z=B*V,Q=_*3,at=B*_*1.5}$.style.transform=`perspective(1200px) rotateY(${Z}deg) rotateX(${Q}deg) rotateZ(${at}deg)`,$.style.zIndex=X?"10":`${Math.max(1,7-_)}`,$.style.opacity=X?"1":`${Math.max(.35,1-_*.13)}`;const ut=$.querySelector(".canvas-wrap"),nt=$.querySelector(".cascade-overlay"),it=$.querySelector(".card-frame");let J;if(X){const B=w*(i.length-1),V=Math.min(Math.floor(B),i.length-2),U=B-V;J=l(i[V],i[V+1],U)}else{const B=Math.min(3+_*6,22),V=14+_*3;J=`inset(${B}% ${B*.6}% ${B}% ${B*.6}% round ${V}px)`}if(ut&&(ut.style.clipPath=J),nt&&(nt.style.clipPath=J),it&&(it.style.clipPath=J),X){const B=5+b*16,V=(.18+b*.14).toFixed(2),U=(.1+b*.08).toFixed(2),ct=(.05+b*.04).toFixed(2);$.style.filter=[`drop-shadow(${B}px ${B*.8}px 0px hsla(${W}, 70%, 50%, ${V}))`,`drop-shadow(${B*2.2}px ${B*1.2}px 1px hsla(${W}, 65%, 45%, ${U}))`,`drop-shadow(${-B*.8}px ${B*1.5}px 0px hsla(${W}, 60%, 40%, ${ct}))`,`drop-shadow(${B*1.4}px ${-B*.6}px 0px hsla(${W}, 60%, 40%, ${ct}))`].join(" "),$.classList.add("leaking"),$.style.setProperty("--frame-glow-size",`${18+b*35}px`),$.style.setProperty("--frame-glow-alpha",`${.12+b*.18}`),$.style.setProperty("--frame-border",`1px solid rgba(255,255,255,${.06+b*.12})`)}else{if(Y>.08){const B=3+Y*10;$.style.filter=`drop-shadow(${B}px ${B*.6}px 0px hsla(${W}, 60%, 45%, ${(Y*.12).toFixed(2)}))`}else $.style.filter="none";$.classList.toggle("leaking",Y>.15),$.style.setProperty("--frame-glow-size","0px"),$.style.setProperty("--frame-glow-alpha","0"),$.style.setProperty("--frame-border",`1px solid rgba(255,255,255,${.03+Y*.04})`)}if(X)k.setParams({rot4dXW:f+w*Math.PI*2,rot4dYW:Math.sin(w*Math.PI)*1.8,rot4dZW:f*.4+w*.8,intensity:.85+b*.15,gridDensity:Math.max(6,22-b*14),speed:1+b*1.8,chaos:.25+b*.5,hue:W+b*40,morphFactor:.5+w*1.2,saturation:.95});else{const B=Y*.5,V=Math.sin(w*Math.PI+z),U=Math.max(0,V)*Y;k.setParams({hue:W+(v-W)*B,intensity:.45+Y*.3,gridDensity:24-Y*8+U*5,speed:.5+U*.7,chaos:.1+U*.2,morphFactor:.4+U*.5,rot4dXW:f+z*.4,rot4dYW:Math.sin(f+z)*.6*Y,saturation:.75+Y*.15})}})}})}}function we(n){const e={geometry:6,hue:270,gridDensity:24,speed:.5,intensity:.6,chaos:.15,dimension:3.4,morphFactor:.8,saturation:.9};ScrollTrigger.create({trigger:"#energySection",start:"top 80%",end:"bottom top",onEnter:()=>{n.acquire("energyBg","energy-bg-canvas",H,e),n.acquire("energyCard","energy-card-canvas",st,kt)},onLeave:()=>{n.release("energyBg"),n.release("energyCard")},onEnterBack:()=>{n.acquire("energyBg","energy-bg-canvas",H,e),n.acquire("energyCard","energy-card-canvas",st,kt)},onLeaveBack:()=>{n.release("energyBg"),n.release("energyCard")}});const t=document.getElementById("energyCard");if(t){const i=gsap.timeline({scrollTrigger:{trigger:"#energySection",start:"top top",end:"bottom bottom",pin:"#energyPinned",scrub:.5}});i.fromTo(t,{y:200,opacity:0,scale:.6,rotateX:-25},{y:0,opacity:1,scale:1,rotateX:0,duration:.3,ease:"power3.out"}),i.to(t,{scale:1.06,boxShadow:"0 50px 100px rgba(0,240,255,0.15), 0 0 80px rgba(168,85,247,0.12)",duration:.08,ease:"power2.out"}),i.to(t,{rotateY:8,scale:1.03,duration:.08,ease:"power2.inOut"}),i.to(t,{rotateY:-8,scale:1.02,duration:.08,ease:"power2.inOut"}),i.to(t,{rotateY:0,scale:1,boxShadow:"0 24px 80px rgba(0,0,0,0.5)",duration:.12,ease:"power2.out"}),i.to(t,{duration:.24}),i.to(t,{rotation:360,scale:.7,y:-150,opacity:0,duration:.12,ease:"power2.in"})}const o=document.getElementById("energyBgWrap"),s=document.getElementById("energyCardShadow"),r=document.getElementById("energyBgVignette");ScrollTrigger.create({trigger:"#energySection",start:"top top",end:"bottom bottom",scrub:.5,onUpdate:i=>{const c=n.get("energyBg");if(!c)return;const d=i.progress,p=n.get("energyCard"),m=Math.sin(d*Math.PI);let u,y;if(d<.15){const f=d/.15;u=g(0,.3,M(f)),y=g(.9,.8,f)}else if(d<.35){const f=(d-.15)/.2;u=g(.3,.8,M(f)),y=g(.8,.3,M(f))}else if(d<.6){const f=(d-.35)/.25,S=Math.sin(f*Math.PI*2)*.15;u=.7+S,y=.4-S}else if(d<.8){const f=(d-.6)/.2;u=g(.7,.2,M(f)),y=g(.4,.85,M(f))}else{const f=(d-.8)/.2;u=g(.2,0,M(f)),y=g(.85,.5,M(f))}const h=g(55,8,y),v=g(55,8,u),w=270+d*80;c.setParams({rot4dXW:d*Math.PI*3*(y>u?1:-.7),rot4dYW:Math.sin(d*Math.PI*2)*1.5,rot4dZW:d*Math.PI*.4,hue:w,gridDensity:Math.max(8,Math.min(55,h)),intensity:g(.2,.85,y),chaos:g(.05,.4,y),speed:g(.1,1,y),morphFactor:.6+m*.5}),p&&(p.setParams({gridDensity:Math.max(6,Math.min(50,v)),intensity:g(.15,.85,u),speed:g(.1,1.2,u),chaos:g(.02,.35,u),rot4dXW:d*Math.PI*3*(u>y?1:-.7)+(d>.8?(d-.8)/.2*Math.PI*4:0)}),Zt(document.getElementById("energyCard"),p)),o&&(o.style.transform=`scale(${g(.92,1.05,y)})`,o.style.filter=y<.3?`blur(${g(4,0,y/.3)}px)`:"none"),gt(s,u),tt(r,h);const b=Math.abs(u-y);if(b<.1){const f=(.1-b)/.1;c.setParam("chaos",Math.min(.7,c.params.chaos+f*.3)),p&&p.setParam("chaos",Math.min(.7,(p.params.chaos||0)+f*.3))}}});const a=document.getElementById("energyBtn"),l=document.getElementById("energyFill");if(a){let c=function(){if(i)return;i=!0;const d=n.get("energyCard"),p=n.get("energyBg");if(!d&&!p){i=!1;return}const m=gsap.timeline({onComplete:()=>{i=!1}});d&&m.to(d.params,{intensity:.05,gridDensity:4,chaos:.6,hue:320,duration:.8,ease:"power3.in",onUpdate:()=>d.render()},0),p&&m.to(p.params,{intensity:.8,gridDensity:55,chaos:.5,hue:180,morphFactor:1.5,duration:.8,ease:"power2.out",onUpdate:()=>p.render()},0),m.to(l,{width:"5%",duration:.8,ease:"power3.in"},0),d&&m.to(d.params,{hue:270,geometry:5,rot4dXW:Math.PI,duration:.6,ease:"power2.inOut",onUpdate:()=>d.render()},.8),p&&m.to(p.params,{hue:60,geometry:3,duration:.6,ease:"power2.inOut",onUpdate:()=>p.render()},.8),m.to("#energyCard",{scale:.94,rotateX:5,borderColor:"rgba(123,63,242,0.4)",boxShadow:"0 0 60px rgba(123,63,242,0.2)",duration:.5,ease:"power2.in"},0),m.to("#energyCard",{scale:1,rotateX:0,borderColor:"rgba(255,255,255,0.06)",boxShadow:"0 24px 80px rgba(0,0,0,0.5)",duration:.8,ease:"elastic.out(1, 0.4)"},1.4),d&&m.to(d.params,{intensity:.6,gridDensity:30,chaos:.1,hue:180,geometry:7,rot4dXW:0,duration:1.2,ease:"elastic.out(1, 0.5)",onUpdate:()=>d.render()},1.5),p&&m.to(p.params,{intensity:.2,gridDensity:16,chaos:.05,hue:270,morphFactor:.5,geometry:6,duration:1.2,ease:"elastic.out(1, 0.5)",onUpdate:()=>p.render()},1.5),m.to(l,{width:"50%",duration:1,ease:"elastic.out(1, 0.5)"},1.5)},i=!1;a.addEventListener("click",c),a.addEventListener("touchstart",d=>{d.preventDefault(),c()})}}function xe(n){ScrollTrigger.create({trigger:"#agentSection",start:"top 90%",end:"bottom top",onEnter:()=>n.acquire("agent","agent-canvas",ot,{geometry:3,hue:240,gridDensity:18,speed:.4,intensity:.5,chaos:.15,dimension:3.5,morphFactor:.6,saturation:.8}),onLeave:()=>n.release("agent"),onEnterBack:()=>n.acquire("agent","agent-canvas",ot,{geometry:3,hue:240,gridDensity:18,speed:.4,intensity:.5,chaos:.15,dimension:3.5,morphFactor:.6,saturation:.8}),onLeaveBack:()=>n.release("agent")}),ScrollTrigger.create({trigger:"#agentSection",start:"top bottom",end:"bottom top",scrub:.5,onUpdate:e=>{const t=n.get("agent");if(!t)return;const o=e.progress,s=Math.sin(o*Math.PI);t.setParams({rot4dXW:o*Math.PI*2,rot4dYW:Math.sin(o*Math.PI*2)*1,hue:240+o*80+s*20,gridDensity:18+s*16,intensity:.5+s*.3,speed:.4+s*.5,chaos:.15+o*.2,morphFactor:.6+s*.4})}})}function Ee(n){ScrollTrigger.create({trigger:"#ctaSection",start:"top 90%",end:"bottom top",onEnter:()=>{n.acquire("ctaL","cta-canvas-left",H,{geometry:5,hue:200,gridDensity:16,speed:.3,intensity:.3,chaos:.1,dimension:3.5,morphFactor:.5,saturation:.85}),n.acquire("ctaR","cta-canvas-right",st,{geometry:7,hue:320,gridDensity:20,speed:.4,intensity:.3,chaos:.12,dimension:3.4,morphFactor:.6,saturation:.9})},onLeave:()=>{n.release("ctaL"),n.release("ctaR")},onEnterBack:()=>{n.acquire("ctaL","cta-canvas-left",H,{geometry:5,hue:200,gridDensity:16,speed:.3,intensity:.3,chaos:.1,dimension:3.5,morphFactor:.5,saturation:.85}),n.acquire("ctaR","cta-canvas-right",st,{geometry:7,hue:320,gridDensity:20,speed:.4,intensity:.3,chaos:.12,dimension:3.4,morphFactor:.6,saturation:.9})},onLeaveBack:()=>{n.release("ctaL"),n.release("ctaR")}});const e=document.getElementById("ctaSeam"),t=document.getElementById("ctaVignette"),o=document.getElementById("ctaGpuLeft"),s=document.getElementById("ctaGpuRight");ScrollTrigger.create({trigger:"#ctaSection",start:"top bottom",end:"bottom bottom",scrub:1,onUpdate:r=>{const a=n.get("ctaL"),l=n.get("ctaR");if(!a&&!l)return;const i=r.progress,c=Math.sin(i*Math.PI);let d,p;if(i<.4){const f=i/.4;d=g(.9,.85,f),p=g(.1,.15,f)}else if(i<.7){const f=(i-.4)/.3,S=M(f);d=g(.85,.15,S),p=g(.15,.85,S)}else{const f=(i-.7)/.3,S=M(f);d=g(.15,.55,S),p=g(.85,.55,S)}const m=g(50,8,d),u=g(50,8,p),y=M(q((i-.7)/.3)),h=220,v=11,w=i>.45&&i<.65?Math.sin((i-.45)/.2*Math.PI)*.4:0;if(a){const f=g(200,h,y);a.setParams({geometry:i<.3?5:i<.6?2:v,hue:f+c*20*(1-y),rot4dXW:i*Math.PI*3,rot4dYW:Math.sin(i*Math.PI*2)*1.5*(1-y),rot4dZW:i*Math.PI*.5,gridDensity:Math.max(6,Math.min(55,m)),intensity:g(.2,.85,d),speed:g(.15,1,d),chaos:g(.02,.3,d)+w,morphFactor:.5+i*.6,saturation:.85+y*.1})}if(l){const f=g(320,h,y);l.setParams({geometry:i<.3?7:i<.6?4:v,hue:f-c*20*(1-y),rot4dXW:-i*Math.PI*3*(1-y)+i*Math.PI*3*y,rot4dYW:Math.cos(i*Math.PI*2)*1.5*(1-y),rot4dZW:-i*Math.PI*.5*(1-y),gridDensity:Math.max(6,Math.min(55,u)),intensity:g(.2,.85,p),speed:g(.15,1,p),chaos:g(.02,.3,p)+w,morphFactor:.6+i*.5,saturation:.9+y*.05})}if(o&&(o.style.filter=d<.3?`blur(${g(4,0,d/.3)}px)`:"none"),s&&(s.style.filter=p<.3?`blur(${g(4,0,p/.3)}px)`:"none"),o&&s){const f=g(100,50,y),S=g(0,50,y);o.style.clipPath=`polygon(0 0, ${f}% 0, ${S}% 100%, 0 100%)`,s.style.clipPath=`polygon(${f}% 0, 100% 0, 100% 100%, ${S}% 100%)`}if(Mt(e,a,l),i>.5&&i<.6&&o&&s){const f=(i-.5)/.1,S=Math.sin(f*Math.PI)*.15;o.style.opacity=`${1-S}`,s.style.opacity=`${1-S}`}else o&&(o.style.opacity="1"),s&&(s.style.opacity="1");const b=Math.max(m,u);tt(t,b)}})}function $e(){const n=[{trigger:"#divider-hero-morph",nextSection:"#morphSection",hue:220},{trigger:"#divider-morph-playground",nextSection:"#playgroundSection",hue:280},{trigger:"#divider-playground-triptych",nextSection:"#triptychSection",hue:190},{trigger:"#divider-cascade-energy",nextSection:"#energySection",hue:310}],e=document.getElementById("sectionVeil");e&&(e.style.display="none"),n.forEach(({trigger:t,nextSection:o,hue:s})=>{const r=document.querySelector(t),a=document.querySelector(o);r&&ScrollTrigger.create({trigger:r,start:"top 95%",end:"bottom 5%",scrub:.2,onUpdate:l=>{const i=l.progress,c=Math.sin(i*Math.PI),d=c*c,p=r.querySelector("svg");if(p&&(p.style.filter=d>.05?`drop-shadow(0 0 ${12*d}px hsla(${s}, 70%, 55%, ${d*.4}))`:"none"),a&&d>.01){const m=M(q((i-.3)/.7));m>0&&m<1?a.style.clipPath=`circle(${m*120}% at 50% 0%)`:m>=1&&(a.style.clipPath="")}},onLeave:()=>{a&&(a.style.clipPath="");const l=r.querySelector("svg");l&&(l.style.filter="none")},onLeaveBack:()=>{a&&(a.style.clipPath="");const l=r.querySelector("svg");l&&(l.style.filter="none")}})})}function Ie(n){let e=0,t=0,o=!1,s=0;const r=2500,a=500,l=()=>{const i=performance.now(),c=window.scrollY||window.pageYOffset,d=i-t;if(d>0&&t>0){const p=Math.abs(c-e)/(d/1e3);if(p>r&&!o&&i>s){o=!0,s=i+a+1e3;const m=Math.min(1,p/5e3),u=new Map;for(const[y,h]of n.entries())u.set(y,{chaos:h.params.chaos,speed:h.params.speed,intensity:h.params.intensity}),h.setParams({chaos:Math.min(1,h.params.chaos+m*.4),speed:h.params.speed*(1+m*1.5),intensity:Math.min(1,h.params.intensity+m*.2)});document.documentElement.style.setProperty("--burst-intensity",m.toFixed(2)),setTimeout(()=>{for(const[y,h]of u.entries()){const v=n.get(y);v&&v.setParams(h)}document.documentElement.style.setProperty("--burst-intensity","0"),o=!1},a)}}e=c,t=i,requestAnimationFrame(l)};requestAnimationFrame(l)}function Ce(n,e){ScrollTrigger.create({trigger:"#triptychSection",start:"80% top",end:"bottom top",scrub:.3,onUpdate:t=>{const o=t.progress,s=n.get("triLeft"),r=n.get("triCenter"),a=n.get("triRight"),l=M(o);s&&s.setParams({gridDensity:g(22,55,l),speed:g(.4,.08,l),chaos:g(.15,.01,l),intensity:g(.65,.9,l)}),r&&r.setParams({gridDensity:g(20,50,l),speed:g(.5,.06,l),chaos:g(.1,.005,l),intensity:g(.5,.85,l)}),a&&a.setParams({gridDensity:g(18,50,l),speed:g(.5,.1,l),chaos:g(.2,.02,l),intensity:g(.65,.85,l)})}}),ScrollTrigger.create({trigger:"#cascadeSection",start:"top 90%",end:"top 60%",scrub:.2,onUpdate:t=>{const o=t.progress;if(o>.4&&o<.7)for(let r=0;r<6;r++){const a=e.get(`cas${r}`);a&&a.setParams({chaos:.6*(1-Math.abs(o-.55)/.15),speed:2*(1-Math.abs(o-.55)/.15)})}}})}function Te(n){ScrollTrigger.create({trigger:"#agentSection",start:"60% top",end:"bottom top",scrub:.4,onUpdate:e=>{const t=e.progress;if(t<.8){const o=t/.8,s=n.get("agent");s&&(he(o,s),s.setParam("rot4dXW",o*Math.PI*4),s.setParam("rot4dYW",Math.sin(o*Math.PI*3)*2)),document.documentElement.style.setProperty("--crescendo-vignette",(Math.pow(o,2)*.35).toFixed(2))}if(t>=.8&&t<.88){const o=n.get("agent");o&&o.setParams({speed:0,chaos:0,intensity:.02,gridDensity:4}),document.documentElement.style.setProperty("--crescendo-vignette","0"),document.documentElement.style.setProperty("--silence-blackout","1")}if(t>=.88){const o=(t-.88)/.12,s=n.get("agent");s&&(ge(1-o,s),s.setParams({speed:o*.3,intensity:o*.35,gridDensity:8+o*10,chaos:o*.12})),document.documentElement.style.setProperty("--silence-blackout",(1-M(o)).toFixed(2))}},onLeave:()=>{document.documentElement.style.setProperty("--crescendo-vignette","0"),document.documentElement.style.setProperty("--silence-blackout","0")},onLeaveBack:()=>{document.documentElement.style.setProperty("--crescendo-vignette","0"),document.documentElement.style.setProperty("--silence-blackout","0")}})}function Le(){document.querySelectorAll("[data-animate]").forEach(a=>{gsap.from(a,{y:60,opacity:0,rotateX:8,scale:.97,filter:"blur(4px)",duration:1,ease:"power3.out",scrollTrigger:{trigger:a,start:"top 82%",once:!0}})});const e=document.querySelectorAll(".agent-card");e.length>0&&gsap.from(e,{y:50,opacity:0,scale:.92,rotateY:-5,duration:.8,stagger:{amount:.5,from:"center"},ease:"power3.out",scrollTrigger:{trigger:".agent-grid",start:"top 80%",once:!0}}),document.querySelectorAll(".code-block, .agent-tools").forEach((a,l)=>{gsap.from(a,{y:30,opacity:0,scale:.97,filter:"blur(6px) brightness(0.7)",duration:.8,delay:l*.1,ease:"power2.out",scrollTrigger:{trigger:a,start:"top 85%",once:!0}})});const o=document.querySelector(".cta-content");if(o){const a=gsap.timeline({scrollTrigger:{trigger:"#ctaSection",start:"top 70%",once:!0}});a.from(o,{y:100,opacity:0,scale:.9,rotateX:5,filter:"blur(8px)",duration:.8,ease:"power3.out"}),a.to(o,{scale:1.02,duration:.2,ease:"power2.out"}),a.to(o,{scale:1,filter:"blur(0px)",duration:.3,ease:"power2.inOut"})}const s=document.querySelectorAll(".ctrl-group");s.length>0&&gsap.from(s,{y:25,opacity:0,scale:.95,duration:.5,stagger:{amount:.6,from:"start"},ease:"back.out(1.2)",scrollTrigger:{trigger:"#playgroundControls",start:"top 85%",once:!0}}),document.querySelectorAll(".stat-number").forEach(a=>{ScrollTrigger.create({trigger:a,start:"top 85%",once:!0,onEnter:()=>{gsap.from(a,{scale:.5,opacity:0,y:20,duration:.6,ease:"back.out(2)"})}})}),document.querySelectorAll(".section-divider").forEach(a=>{gsap.to(a,{y:-15,ease:"none",scrollTrigger:{trigger:a,start:"top bottom",end:"bottom top",scrub:1.5}})});const r=document.querySelector("footer");r&&gsap.from(r,{y:30,opacity:0,duration:.8,ease:"power2.out",scrollTrigger:{trigger:r,start:"top 92%",once:!0}}),document.querySelectorAll(".section-divider[id]").forEach(a=>{ScrollTrigger.create({trigger:a,start:"top 90%",end:"bottom 10%",scrub:.2,onUpdate:l=>{const i=Math.sin(l.progress*Math.PI);a.style.setProperty("--divider-glow",(i*i*.35).toFixed(3))},onLeave:()=>a.style.setProperty("--divider-glow","0"),onLeaveBack:()=>a.style.setProperty("--divider-glow","0")})}),document.querySelectorAll(".canvas-wrap").forEach(a=>{ScrollTrigger.create({trigger:a,start:"top bottom",end:"bottom top",onEnter:()=>a.classList.add("breathing"),onLeave:()=>a.classList.remove("breathing"),onEnterBack:()=>a.classList.add("breathing"),onLeaveBack:()=>a.classList.remove("breathing")})})}const j=n=>Math.max(0,Math.min(1,n)),K=(n,e,t)=>n+(e-n)*t,Ct=n=>n*n*(3-2*n);class yt{constructor(e,t={}){this.container=document.getElementById(e),this.container&&(this.mode=t.mode||"radial",this.blendMode=t.blendMode||"screen",this.baseOpacity=t.baseOpacity??.12,this.hue=t.hue??200,this.intensity=t.intensity??.5,this.angle=0,this.el=document.createElement("div"),this.el.className="overlay-gradient-wash",this.el.setAttribute("aria-hidden","true"),Object.assign(this.el.style,{position:"absolute",inset:"0",pointerEvents:"none",zIndex:t.zIndex??"6",mixBlendMode:this.blendMode,opacity:"0",transition:"opacity 0.4s ease-out",willChange:"background, opacity"}),this.container.style.position=this.container.style.position||"relative",this.container.appendChild(this.el))}update(e,t={}){if(!this.el)return;const o=t.hue??this.hue,s=j(t.intensity??this.intensity),r=t.chaos??0,a=performance.now()*.001;this.angle+=(.3+r*2)*.016;const l=this.baseOpacity*s,i=70+r*20,c=45+s*15;if(this.mode==="radial"){const d=50+Math.sin(a*.3+e*Math.PI*2)*20,p=50+Math.cos(a*.2+e*Math.PI)*15;this.el.style.background=`radial-gradient(
        ellipse 80% 80% at ${d}% ${p}%,
        hsla(${o}, ${i}%, ${c}%, ${l}) 0%,
        hsla(${(o+60)%360}, ${i}%, ${c-10}%, ${l*.4}) 40%,
        transparent 75%
      )`}else if(this.mode==="conic"){const d=this.angle*57.3;this.el.style.background=`conic-gradient(
        from ${d}deg at 50% 50%,
        hsla(${o}, ${i}%, ${c}%, ${l}) 0deg,
        transparent 60deg,
        hsla(${(o+120)%360}, ${i}%, ${c}%, ${l*.6}) 120deg,
        transparent 180deg,
        hsla(${(o+240)%360}, ${i}%, ${c}%, ${l*.4}) 240deg,
        transparent 300deg,
        hsla(${o}, ${i}%, ${c}%, ${l}) 360deg
      )`}else{const d=e*360;this.el.style.background=`linear-gradient(
        ${d}deg,
        hsla(${o}, ${i}%, ${c}%, ${l}) 0%,
        transparent 35%,
        hsla(${(o+180)%360}, ${i}%, ${c}%, ${l*.5}) 65%,
        transparent 100%
      )`}this.el.style.opacity=s>.05?"1":"0"}dispose(){var e;(e=this.el)==null||e.remove()}}class qt{constructor(e,t={}){this.target=document.getElementById(e),this.target&&(this.baseSize=t.baseSize??8,this.pulseScale=t.pulseScale??2.5,this.hue=t.hue??200,this.el=document.createElement("div"),this.el.className="overlay-edge-glow",this.el.setAttribute("aria-hidden","true"),Object.assign(this.el.style,{position:"absolute",inset:`-${this.baseSize}px`,borderRadius:"inherit",pointerEvents:"none",zIndex:t.zIndex??"7",opacity:"0",transition:"opacity 0.3s ease-out"}),this.target.style.position=this.target.style.position||"relative",this.target.appendChild(this.el))}update(e,t={}){if(!this.el)return;const o=t.hue??this.hue,s=j(t.intensity??.5),r=j(t.chaos??0),a=t.speed??1,l=performance.now()*.001,i=Math.sin(l*a*2)*.5+.5,c=this.baseSize+i*this.pulseScale*(1+r),d=(.15+s*.3+r*.15)*i;this.el.style.boxShadow=[`0 0 ${c}px hsla(${o}, 80%, 55%, ${d})`,`inset 0 0 ${c*.6}px hsla(${(o+30)%360}, 70%, 50%, ${d*.5})`].join(", "),this.el.style.opacity=s>.1?"1":"0"}dispose(){var e;(e=this.el)==null||e.remove()}}class Yt{constructor(e,t={}){if(this.container=document.getElementById(e),!!this.container){this.maxCount=t.count??20,this.hue=t.hue??200,this.spread=t.spread??200,this.lifespan=t.lifespan??4e3,this.particles=[],this.el=document.createElement("div"),this.el.className="overlay-particle-field",this.el.setAttribute("aria-hidden","true"),Object.assign(this.el.style,{position:"absolute",inset:"0",pointerEvents:"none",overflow:"hidden",zIndex:t.zIndex??"5"}),this.container.style.position=this.container.style.position||"relative",this.container.appendChild(this.el);for(let o=0;o<Math.floor(this.maxCount*.6);o++)this._spawn(!0)}}_spawn(e=!1){if(this.particles.length>=this.maxCount)return;const t=document.createElement("span"),o=2+Math.random()*3,s=Math.random()*100,r=Math.random()*100,a=(Math.random()-.5)*this.spread,l=-20-Math.random()*this.spread*.6,i=this.lifespan*(.6+Math.random()*.8),c=e?-Math.random()*i:0,d=Math.random()*60-30;Object.assign(t.style,{position:"absolute",left:`${s}%`,top:`${r}%`,width:`${o}px`,height:`${o}px`,borderRadius:"50%",background:`hsla(${this.hue+d}, 70%, 70%, 0.6)`,boxShadow:`0 0 ${o*2}px hsla(${this.hue+d}, 70%, 60%, 0.3)`,"--dx":`${a}px`,"--dy":`${l}px`,"--particle-dur":`${i}ms`,animation:`particle-drift ${i}ms linear infinite`,animationDelay:`${c}ms`}),this.el.appendChild(t),this.particles.push(t)}update(e,t={}){if(!this.el)return;this.hue=t.hue??this.hue;const o=j(t.intensity??.5),s=j(t.chaos??0);this.el.style.opacity=String(.3+o*.7),s>.4&&this.particles.length<this.maxCount&&this._spawn(),this._frameCount||(this._frameCount=0),this._frameCount++,this._frameCount%60===0&&this.particles.forEach((r,a)=>{const l=Math.sin(a*.5)*40;r.style.background=`hsla(${this.hue+l}, 70%, 70%, ${.3+o*.4})`})}dispose(){var e;(e=this.el)==null||e.remove(),this.particles=[]}}class Tt{constructor(e={}){this.outHue=e.outHue??200,this.inHue=e.inHue??280,this.el=document.createElement("div"),this.el.className="overlay-crossfade-bridge",this.el.setAttribute("aria-hidden","true"),Object.assign(this.el.style,{position:"fixed",inset:"0",pointerEvents:"none",zIndex:"45",opacity:"0",willChange:"opacity, background",transition:"opacity 0.2s ease-out"}),document.body.appendChild(this.el)}update(e,t,o){var c,d,p,m,u,y;if(!this.el)return;const s=j(e),r=Math.sin(s*Math.PI),a=r*r,l=K(this.outHue,this.inHue,Ct(s)),i=a*.08;if(this.el.style.background=`radial-gradient(
      ellipse 120% 100% at 50% ${K(100,0,s)}%,
      hsla(${l}, 60%, 50%, ${i}) 0%,
      hsla(${l}, 40%, 30%, ${i*.4}) 40%,
      transparent 70%
    )`,this.el.style.opacity=a>.01?"1":"0",t&&s<.7){const h=Ct(j(s/.7));t.setParams({intensity:K(((c=t.params)==null?void 0:c.intensity)??.7,.1,h),speed:K(((d=t.params)==null?void 0:d.speed)??.5,.05,h),gridDensity:K(((p=t.params)==null?void 0:p.gridDensity)??24,55,h)})}if(o&&s>.3){const h=Ct(j((s-.3)/.7));o.setParams({intensity:K(.05,((m=o.params)==null?void 0:m.intensity)??.7,h),speed:K(.02,((u=o.params)==null?void 0:u.speed)??.5,h),gridDensity:K(60,((y=o.params)==null?void 0:y.gridDensity)??24,h)})}}dispose(){var e;(e=this.el)==null||e.remove()}}class We{constructor(){this.layers=new Map,this.bridges=[],this._rafId=null}register(e,t,o={}){this.layers.set(e,{layer:t,opts:o})}registerBridge(e,t={}){this.bridges.push({bridge:e,...t})}initScrollTriggers(){if(!(typeof ScrollTrigger>"u")){for(const[e,{layer:t,opts:o}]of this.layers.entries())o.trigger&&ScrollTrigger.create({trigger:o.trigger,start:o.start||"top bottom",end:o.end||"bottom top",scrub:o.scrub??.3,onUpdate:s=>{const r=s.progress,a=typeof o.adapter=="function"?o.adapter():o.adapter,l=(a==null?void 0:a.params)||{};t.update(r,l)}});for(const e of this.bridges)e.trigger&&ScrollTrigger.create({trigger:e.trigger,start:e.start||"top 80%",end:e.end||"top 20%",scrub:.2,onUpdate:t=>{const o=typeof e.outAdapter=="function"?e.outAdapter():e.outAdapter,s=typeof e.inAdapter=="function"?e.inAdapter():e.inAdapter;e.bridge.update(t.progress,o,s)}})}}dispose(){var e,t,o;for(const[s,{layer:r}]of this.layers.entries())(e=r.dispose)==null||e.call(r);for(const s of this.bridges)(o=(t=s.bridge).dispose)==null||o.call(t);this.layers.clear(),this.bridges=[]}}class Be{constructor(){this.el=document.createElement("div"),this.el.className="overlay-transition-ripple",this.el.setAttribute("aria-hidden","true"),Object.assign(this.el.style,{position:"fixed",left:"50%",top:"50%",width:"0",height:"0",borderRadius:"50%",pointerEvents:"none",zIndex:"42",opacity:"0",transform:"translate(-50%, -50%)",willChange:"width, height, opacity"}),document.body.appendChild(this.el),this._animating=!1}fire(e,t=50){if(this._animating||typeof gsap>"u")return;this._animating=!0;const o=Math.max(window.innerWidth,window.innerHeight)*2.5;this.el.style.top=`${t}%`,this.el.style.background=`radial-gradient(circle,
      hsla(${e}, 70%, 55%, 0.12) 0%,
      hsla(${e}, 60%, 45%, 0.06) 40%,
      transparent 70%)`,gsap.fromTo(this.el,{width:0,height:0,opacity:.8},{width:o,height:o,opacity:0,duration:1.2,ease:"power2.out",onComplete:()=>{this._animating=!1}})}dispose(){var e;(e=this.el)==null||e.remove()}}class At{constructor(e,t,o={}){if(this.sourceCanvas=document.getElementById(e),this.container=document.getElementById(t),!(!this.sourceCanvas||!this.container)){this.echoCount=o.echoes??3,this.spacing=o.spacing??.06,this.blendMode=o.blendMode||"screen",this.echoes=[];for(let s=0;s<this.echoCount;s++){const r=document.createElement("div");r.className="overlay-multi-echo",r.setAttribute("aria-hidden","true");const a=document.createElement("canvas");a.style.cssText="width:100%;height:100%;display:block;";const l=1+(s+1)*this.spacing,i=.08-s*.02;Object.assign(r.style,{position:"absolute",inset:"0",pointerEvents:"none",transform:`scale(${l})`,opacity:String(Math.max(.01,i)),mixBlendMode:this.blendMode,zIndex:String(2-s),willChange:"transform, opacity",transition:"transform 0.4s ease-out, opacity 0.4s ease-out",filter:`blur(${(s+1)*1.5}px)`}),r.appendChild(a),this.container.appendChild(r),this.echoes.push({el:r,canvas:a,ctx:a.getContext("2d",{alpha:!0})})}this._frameCount=0,this._copyLoop()}}_copyLoop(){if(this._frameCount++,this._frameCount%5===0&&this.sourceCanvas&&this.sourceCanvas.width>0){const e=Math.floor(this._frameCount/5)%this.echoCount,t=this.echoes[e];if(t&&t.ctx){t.canvas.width!==this.sourceCanvas.width&&(t.canvas.width=this.sourceCanvas.width,t.canvas.height=this.sourceCanvas.height);try{t.ctx.drawImage(this.sourceCanvas,0,0)}catch{}}}this._rafId=requestAnimationFrame(()=>this._copyLoop())}update(e,t={}){if(!this.echoes.length)return;const o=j(t.chaos??0),s=j(t.intensity??.5),r=performance.now()*.001;this.echoes.forEach((a,l)=>{const i=Math.sin(r*.5+l*1.2)*o*3,d=1+(l+1)*this.spacing+o*.04*(l+1),p=Math.sin(r*.3+l*.8)*o*2,m=(.08-l*.02)*(.5+s*.5);a.el.style.transform=`scale(${d}) rotate(${p}deg) translate(${i}px, ${i*.5}px)`,a.el.style.opacity=String(Math.max(.01,m))})}dispose(){this._rafId&&cancelAnimationFrame(this._rafId),this.echoes.forEach(e=>e.el.remove()),this.echoes=[]}}function Fe(n){const e=new We,t=new Be,o=new yt("heroContent",{mode:"radial",blendMode:"screen",baseOpacity:.08,zIndex:"1"}),s=new qt("heroContent",{baseSize:4,pulseScale:3,hue:210});e.register("heroWash",o,{trigger:".hero",start:"top top",end:"bottom top",adapter:()=>n.get("hero")}),e.register("heroGlow",s,{trigger:".hero",start:"top top",end:"bottom top",adapter:()=>n.get("hero")});const r=new yt("morphCard",{mode:"conic",blendMode:"overlay",baseOpacity:.15,zIndex:"2"});e.register("morphWash",r,{trigger:"#morphSection",start:"top top",end:"bottom bottom",adapter:()=>n.get("morph")});const a=new At("morph-canvas","morphPinned",{echoes:2,spacing:.05,blendMode:"screen"});e.register("morphEchoes",a,{trigger:"#morphSection",start:"top top",end:"bottom bottom",adapter:()=>n.get("morph")});const l=new Yt("triptychCenter",{count:15,hue:280,spread:150,lifespan:5e3,zIndex:"8"});e.register("triParticles",l,{trigger:"#triptychSection",start:"top bottom",end:"bottom top",adapter:()=>n.get("triCenter")});const i=new yt("energyBgWrap",{mode:"sweep",blendMode:"screen",baseOpacity:.1,zIndex:"3"});e.register("energyWash",i,{trigger:"#energySection",start:"top top",end:"bottom bottom",adapter:()=>n.get("energyBg")});const c=new qt("energyCard",{baseSize:6,pulseScale:4,hue:180});e.register("energyCardGlow",c,{trigger:"#energySection",start:"top top",end:"bottom bottom",adapter:()=>n.get("energyCard")});const d=new At("cta-canvas-left","ctaGpuLeft",{echoes:2,spacing:.04,blendMode:"screen"});e.register("ctaEchoes",d,{trigger:"#ctaSection",start:"top bottom",end:"bottom bottom",adapter:()=>n.get("ctaL")});const p=new yt("ctaGpuRight",{mode:"radial",blendMode:"overlay",baseOpacity:.1,zIndex:"4"});e.register("ctaWash",p,{trigger:"#ctaSection",start:"top bottom",end:"bottom bottom",adapter:()=>n.get("ctaR")});const m=new Yt("agentSection",{count:12,hue:240,spread:120,lifespan:6e3,zIndex:"3"});e.register("agentParticles",m,{trigger:"#agentSection",start:"top bottom",end:"bottom top",adapter:()=>n.get("agent")});const u=new Tt({outHue:210,inHue:270});e.registerBridge(u,{trigger:"#divider-hero-morph",start:"top 90%",end:"bottom 10%",outAdapter:()=>n.get("hero"),inAdapter:()=>n.get("morph")});const y=new Tt({outHue:280,inHue:200});e.registerBridge(y,{trigger:"#divider-morph-playground",start:"top 90%",end:"bottom 10%",outAdapter:()=>n.get("morph"),inAdapter:()=>n.get("playground")});const h=new Tt({outHue:320,inHue:270});e.registerBridge(h,{trigger:"#divider-cascade-energy",start:"top 90%",end:"bottom 10%",outAdapter:()=>n.get("casGpuL"),inAdapter:()=>n.get("energyBg")}),typeof ScrollTrigger<"u"&&[{trigger:"#divider-hero-morph",hue:220},{trigger:"#divider-morph-playground",hue:280},{trigger:"#divider-playground-triptych",hue:190},{trigger:"#divider-cascade-energy",hue:310}].forEach(({trigger:I,hue:L})=>{const C=document.querySelector(I);C&&ScrollTrigger.create({trigger:C,start:"top 60%",once:!1,onEnter:()=>{const E=C.getBoundingClientRect(),R=(E.top+E.height/2)/window.innerHeight*100;t.fire(L,R)}})}),e.initScrollTriggers();const v=document.documentElement,w=["hero","morph","triCenter","energyCard","agent","ctaL","playground"];let b=0;function f(){const S=performance.now();if(S-b<50){requestAnimationFrame(f);return}b=S;for(const I of w){const L=n.get(I);if(!(L!=null&&L.params))continue;const C=L.params;v.style.setProperty("--q-xw",(C.rot4dXW??0).toFixed(3)),v.style.setProperty("--q-yw",(C.rot4dYW??0).toFixed(3)),v.style.setProperty("--q-zw",(C.rot4dZW??0).toFixed(3)),v.style.setProperty("--q-intensity",j(C.intensity??.5).toFixed(3)),v.style.setProperty("--overlay-hue",Math.round(C.hue??200)),v.style.setProperty("--overlay-intensity",j(C.intensity??.5).toFixed(3));break}requestAnimationFrame(f)}return requestAnimationFrame(f),e}function Re(){if(typeof gsap>"u"||typeof ScrollTrigger>"u"){console.warn("[reveal] GSAP/ScrollTrigger not available, skipping reveal layers");return}gsap.registerPlugin(ScrollTrigger),_e(),De(),Ae(),Oe()}function _e(){const n=document.createElement("div");n.className="reveal-layer parallax-field",n.id="parallaxField",n.setAttribute("aria-hidden","true"),document.body.appendChild(n),gsap.to(n,{yPercent:-15,ease:"none",scrollTrigger:{trigger:document.body,start:"top top",end:"bottom bottom",scrub:.5}})}function De(){Ot("#openingSection","#main",{x:50,y:50,startRadius:0,endRadius:85}),Ht("#main","#morphSection",{count:10,angle:-20,staggerFrom:"edges"}),ke("#morphSection","#playgroundSection",{cols:6}),Xe("#playgroundSection","#triptychSection"),qe("#triptychSection","#cascadeSection",{barsPerEdge:5}),Ot("#cascadeSection","#energySection",{x:50,y:40,startRadius:0,endRadius:90}),Ht("#energySection","#agentSection",{count:6,angle:25,staggerFrom:"start"}),Ye("#agentSection","#ctaSection",{cols:10,rows:6})}function Ot(n,e,t){const o=document.querySelector(n),s=document.querySelector(e);if(!o||!s)return;const r=document.createElement("div");r.className="reveal-layer--absolute reveal-iris--invert",r.setAttribute("aria-hidden","true"),r.style.cssText=`
        position: absolute; inset: -2px; z-index: 20; pointer-events: none;
        --iris-radius: ${t.startRadius}px;
        --iris-x: ${t.x}%;
        --iris-y: ${t.y}%;
    `,s.style.position="relative",s.appendChild(r);for(let i=0;i<3;i++){const c=document.createElement("div");c.className="iris-ring",c.style.cssText=`--ring-scale: ${.3+i*.2}; --ring-opacity: 0;`,r.appendChild(c)}const a=Math.max(window.innerWidth,window.innerHeight)*(t.endRadius/100);gsap.to(r,{"--iris-radius":`${a}px`,ease:"power2.inOut",scrollTrigger:{trigger:s,start:"top 90%",end:"top 20%",scrub:.5},onComplete:()=>{r.style.display="none"}}),r.querySelectorAll(".iris-ring").forEach((i,c)=>{gsap.to(i,{"--ring-scale":1+c*.3,"--ring-opacity":.4-c*.1,ease:"power1.out",scrollTrigger:{trigger:s,start:`top ${95-c*5}%`,end:`top ${40-c*5}%`,scrub:.5}})})}function Ht(n,e,t){const o=document.querySelector(e);if(!o)return;const s=document.createElement("div");s.className="section-reveal-layer",s.setAttribute("aria-hidden","true"),o.appendChild(s);const r=[];for(let l=0;l<t.count;l++){const i=document.createElement("div");i.className="reveal-bar reveal-bar--diag";const c=l/t.count*100;i.style.cssText=`
            top: ${c}%;
            --bar-angle: ${t.angle}deg;
            --bar-count: ${t.count};
            background: var(--bg);
        `,s.appendChild(i),r.push(i)}const a=t.staggerFrom==="edges"?{from:"edges",each:.03}:{from:"start",each:.04};gsap.fromTo(r,{"--bar-tx":"0%",opacity:1},{"--bar-tx":l=>l%2===0?"120%":"-120%",opacity:0,stagger:a,ease:"power2.inOut",scrollTrigger:{trigger:o,start:"top 85%",end:"top 15%",scrub:.5}})}function ke(n,e,t){const o=document.querySelector(e);if(!o)return;const s=document.createElement("div");s.className="section-reveal-layer reveal-columns",s.setAttribute("aria-hidden","true"),s.style.display="flex",o.appendChild(s);const r=[];for(let a=0;a<t.cols;a++){const l=document.createElement("div");l.className="reveal-col reveal-col--glass",s.appendChild(l),r.push(l)}gsap.fromTo(r,{xPercent:0},{xPercent:a=>a%2===0?-120:120,stagger:{from:"center",each:.02},ease:"power3.inOut",scrollTrigger:{trigger:o,start:"top 80%",end:"top 10%",scrub:.5}})}function Xe(n,e){const t=document.querySelector(e);if(!t)return;const o=["top","bottom","left","right"],s=[];o.forEach(r=>{const a=document.createElement("div");a.className=`reveal-glass-panel reveal-glass-panel--${r}`,a.setAttribute("aria-hidden","true"),t.style.position="relative",t.appendChild(a),s.push({el:a,pos:r})}),s.forEach(({el:r,pos:a})=>{const l=a==="top"||a==="bottom"?"yPercent":"xPercent",i=a==="top"||a==="left"?-110:110;gsap.fromTo(r,{[l]:0,opacity:1},{[l]:i,opacity:0,ease:"power2.inOut",scrollTrigger:{trigger:t,start:"top 85%",end:"top 15%",scrub:.5}})})}function qe(n,e,t){const o=document.querySelector(e);if(!o)return;const s=document.createElement("div");s.className="section-reveal-layer",s.setAttribute("aria-hidden","true"),o.appendChild(s);const r=[];["from-top","from-bottom","from-left","from-right"].forEach((i,c)=>{for(let d=0;d<t.barsPerEdge;d++){const p=document.createElement("div");p.className=`bezel-bar bezel-bar--${i}`;const m=i==="from-top"||i==="from-bottom",u=d/t.barsPerEdge*100+100/t.barsPerEdge/2;m?(p.style.left=`${u}%`,p.style.width=`${100/t.barsPerEdge}%`):(p.style.top=`${u}%`,p.style.height=`${100/t.barsPerEdge}%`),s.appendChild(p),r.push({el:p,dir:i,idx:d,group:c})}});const l=gsap.timeline({scrollTrigger:{trigger:o,start:"top 90%",end:"top 5%",scrub:.5}});r.forEach(({el:i,dir:c,idx:d})=>{const m=c==="from-top"||c==="from-bottom"?"yPercent":"xPercent",u=c.includes("top")||c.includes("left")?-100:100;l.fromTo(i,{[m]:u},{[m]:0,duration:.4,ease:"power2.out"},d*.03)}),r.forEach(({el:i,dir:c,idx:d})=>{const m=c==="from-top"||c==="from-bottom"?"yPercent":"xPercent",u=c.includes("top")||c.includes("left")?100:-100;l.to(i,{[m]:u,duration:.4,ease:"power2.in"},.5+d*.03)})}function Ye(n,e,t){const o=document.querySelector(e);if(!o)return;const s=document.createElement("div");s.className="section-reveal-layer reveal-checker",s.setAttribute("aria-hidden","true"),s.style.cssText=`--checker-cols: ${t.cols}; --checker-rows: ${t.rows};`,o.appendChild(s);const r=[];for(let a=0;a<t.rows;a++)for(let l=0;l<t.cols;l++){const i=document.createElement("div");i.className="checker-tile",s.appendChild(i),r.push(i)}gsap.fromTo(r,{scale:1,opacity:1},{scale:.5,opacity:0,stagger:{grid:[t.rows,t.cols],from:"center",amount:.8},ease:"power2.inOut",scrollTrigger:{trigger:o,start:"top 85%",end:"top 15%",scrub:.5}})}function Ae(){const n=[{width:"35vw",height:"2px",top:"25%",left:"10%",angle:-8,speed:.4,color:"quantum"},{width:"25vw",height:"2px",top:"55%",right:"5%",angle:12,speed:.6,color:"faceted"},{width:"40vw",height:"2px",top:"75%",left:"30%",angle:-4,speed:.3,color:"holographic"}],e={quantum:"rgba(0,240,255,0.15)",faceted:"rgba(168,85,247,0.12)",holographic:"rgba(244,63,94,0.1)"};n.forEach((t,o)=>{const s=document.createElement("div");s.className="reveal-layer",s.setAttribute("aria-hidden","true"),s.style.cssText=`
            position: fixed;
            width: ${t.width};
            height: ${t.height};
            top: ${t.top};
            ${t.left?`left: ${t.left};`:""}
            ${t.right?`right: ${t.right};`:""}
            background: linear-gradient(90deg, transparent, ${e[t.color]}, transparent);
            transform: rotate(${t.angle}deg);
            z-index: 9;
            pointer-events: none;
            mix-blend-mode: screen;
            opacity: 0.7;
        `,document.body.appendChild(s),gsap.to(s,{yPercent:-50*t.speed,ease:"none",scrollTrigger:{trigger:document.body,start:"top top",end:"bottom bottom",scrub:.3}})})}function Oe(){[{section:"#main",position:"bottom",color:"rgba(0,240,255,0.3)",angle:null},{section:"#morphSection",position:"top",color:"rgba(0,240,255,0.2)",angle:-3},{section:"#morphSection",position:"bottom",color:"rgba(168,85,247,0.3)",angle:null},{section:"#playgroundSection",position:"bottom",color:"rgba(168,85,247,0.2)",angle:2},{section:"#triptychSection",position:"bottom",color:"rgba(244,63,94,0.3)",angle:null},{section:"#cascadeSection",position:"bottom",color:"rgba(0,240,255,0.25)",angle:-1},{section:"#energySection",position:"bottom",color:"rgba(168,85,247,0.25)",angle:null},{section:"#agentSection",position:"bottom",color:"rgba(244,63,94,0.2)",angle:3}].forEach(e=>{const t=document.querySelector(e.section);if(!t)return;const o=document.createElement("div");e.angle?(o.className="glow-line glow-line--diag",o.style.cssText=`
                --glow-color: ${e.color};
                --diag-angle: ${e.angle}deg;
                ${e.position}: 0;
            `):(o.className="glow-line glow-line--h",o.style.cssText=`
                --glow-color: ${e.color};
                ${e.position}: 0;
            `),o.setAttribute("aria-hidden","true"),t.style.position="relative",t.appendChild(o),gsap.fromTo(o,{opacity:0,scaleX:.3},{opacity:1,scaleX:1,ease:"power2.out",scrollTrigger:{trigger:t,start:e.position==="top"?"top 80%":"bottom 80%",end:e.position==="top"?"top 30%":"bottom 30%",scrub:.3}})})}const D=new ee(3),et=new Map;let rt=null;const He=[H,ot,st],Ge=["Quantum","Holographic","Faceted"];let Pt=0;function ft(){return D.get("playground")}function pt(){const n=D.acquire("playground","playground-canvas",He[Pt],ce),e=document.getElementById("pgError");return n?(e&&(e.style.display="none"),n.setParams(Vt())):(console.error(`[Playground] Failed to acquire ${Ge[Pt]} GPU context`),e&&(e.style.display="flex")),n}function Wt(){D.release("playground")}function ze(n){if(n===Pt&&D.has("playground"))return;Pt=n,Wt();const e=pt();e&&e.setParams(Vt())}function Vt(){const n={};["hue","gridDensity","speed","chaos","morphFactor","intensity","dimension","saturation","rot4dXW","rot4dYW","rot4dZW","rot4dXY","rot4dXZ","rot4dYZ"].forEach(o=>{const s=document.getElementById(`ctrl-${o}`);s&&(n[o]=parseFloat(s.value))});const t=document.getElementById("ctrl-geometry");return t&&(n.geometry=parseInt(t.value)),n}function Nt(){return D.acquire("hero","hero-canvas",H,ie)}function Ze(){document.querySelectorAll(".cascade-card").forEach((n,e)=>{et.set(`cas${e}`,new re(`cas-${e}`,{geometry:parseInt(n.dataset.geo),hue:parseInt(n.dataset.hue),gridDensity:24,speed:.8,intensity:.9,chaos:.22,morphFactor:.9,dimension:3.3,saturation:.95}))})}function Ve(){rt=new ae({maxTilt:18,perspective:1200,smoothing:.1,returnSpeed:.06}),document.querySelectorAll(".cascade-card").forEach((e,t)=>{const o=et.get(`cas${t}`);rt.register(e,o,{maxTilt:15,sensitivity:1.2,affectsRotation:!0,affectsSpeed:!0,affectsChaos:!0,affectsDensity:!0,affectsHue:!1,rotationScale:1,speedScale:.3,chaosScale:.2,densityScale:.2})});const n=document.getElementById("energyCard");n&&rt.register(n,null,{maxTilt:12,sensitivity:.8,affectsRotation:!0,affectsSpeed:!1,affectsChaos:!0,affectsDensity:!1,rotationScale:.8,chaosScale:.15}),document.querySelectorAll(".agent-card").forEach(e=>{rt.register(e,null,{maxTilt:8,sensitivity:.6})})}function Ne(){var a,l;["hue","gridDensity","speed","chaos","morphFactor","intensity","dimension","saturation","rot4dXW","rot4dYW","rot4dZW","rot4dXY","rot4dXZ","rot4dYZ"].forEach(i=>{const c=document.getElementById(`ctrl-${i}`),d=document.getElementById(`val-${i}`);!c||!d||c.addEventListener("input",()=>{const p=parseFloat(c.value);d.textContent=Number.isInteger(p)?p:p.toFixed(2);const m=ft();m&&m.setParam(i,p)})});const e=document.getElementById("ctrl-geometry"),t=document.getElementById("val-geometry");e&&t&&e.addEventListener("change",()=>{const i=parseInt(e.value);t.textContent=i;const c=ft();c&&c.setParam("geometry",i)}),document.querySelectorAll("[data-pg-system]").forEach(i=>{i.addEventListener("click",()=>{const c=parseInt(i.dataset.pgSystem);ze(c),document.querySelectorAll("[data-pg-system]").forEach(d=>d.classList.toggle("active",parseInt(d.dataset.pgSystem)===c))})});const o={hue:[0,360],gridDensity:[4,80],speed:[.1,3],chaos:[0,1],morphFactor:[0,2],intensity:[.2,1],dimension:[3,4.5],saturation:[0,1],rot4dXW:[0,6.28],rot4dYW:[0,6.28],rot4dZW:[0,6.28],rot4dXY:[0,6.28],rot4dXZ:[0,6.28],rot4dYZ:[0,6.28]},s={hue:200,gridDensity:24,speed:1,chaos:.2,morphFactor:.5,intensity:.7,dimension:3.5,saturation:.8,rot4dXW:0,rot4dYW:0,rot4dZW:0,rot4dXY:0,rot4dXZ:0,rot4dYZ:0};function r(i){for(const[d,p]of Object.entries(i)){const m=document.getElementById(`ctrl-${d}`),u=document.getElementById(`val-${d}`);m&&(m.value=p),u&&(u.textContent=Number.isInteger(p)?p:p.toFixed(2))}const c=ft();c&&c.setParams(i)}(a=document.getElementById("btnRandomize"))==null||a.addEventListener("click",()=>{const i={};for(const[m,[u,y]]of Object.entries(o))i[m]=u+Math.random()*(y-u),(m==="hue"||m==="gridDensity")&&(i[m]=Math.round(i[m]));const c=Math.floor(Math.random()*24);i.geometry=c;const d=document.getElementById("ctrl-geometry"),p=document.getElementById("val-geometry");d&&(d.value=c),p&&(p.textContent=c),r(i)}),(l=document.getElementById("btnReset"))==null||l.addEventListener("click",()=>{r(s);const i=document.getElementById("ctrl-geometry"),c=document.getElementById("val-geometry");i&&(i.value=3),c&&(c.textContent="3");const d=ft();d&&d.setParam("geometry",3)})}function je(){ScrollTrigger.create({trigger:"#playgroundSection",start:"top 80%",end:"bottom top",onEnter:pt,onLeave:Wt,onEnterBack:pt,onLeaveBack:Wt})}const G={x:.5,y:.5,targetX:.5,targetY:.5,active:!1};function Ue(){const n=document.documentElement,e=(t,o)=>{G.targetX=t/window.innerWidth,G.targetY=o/window.innerHeight,G.active=!0,n.style.setProperty("--mouse-x",`${G.targetX*100}%`),n.style.setProperty("--mouse-y",`${G.targetY*100}%`),n.style.setProperty("--mouse-active","1")};document.addEventListener("mousemove",t=>e(t.clientX,t.clientY)),document.addEventListener("touchmove",t=>{t.touches.length&&e(t.touches[0].clientX,t.touches[0].clientY)},{passive:!0}),document.addEventListener("mouseleave",()=>{G.active=!1,n.style.setProperty("--mouse-active","0")})}function Qe(){var t,o;G.x+=(G.targetX-G.x)*.08,G.y+=(G.targetY-G.y)*.08;const n=G.x,e=G.y;for(const s of et.values())s.setParam("mouseX",n),s.setParam("mouseY",e);if(G.active){const s=["hero","opening","playground","energyCard","energyBg","triLeft","triCenter","triRight","casGpuL","casGpuR","ctaL","ctaR","agent"];for(const r of s){const a=D.get(r);if(!(!a||!a.engine))try{(o=(t=a.engine)==null?void 0:t.updateInteraction)==null||o.call(t,n,e,.6)}catch{}}}}function jt(n){Qe();for(const e of et.values())e.render(n);requestAnimationFrame(jt)}Ze();D.acquire("opening","opening-canvas",H,St);Ne();Ve();Ue();requestAnimationFrame(jt);let ht=null;const Gt=document.getElementById("playgroundSection");Gt&&(ht=new IntersectionObserver(([n])=>{n.isIntersecting&&!D.has("playground")&&pt()},{threshold:.1}),ht.observe(Gt));document.addEventListener("visibilitychange",()=>{if(document.hidden)D.releaseAll();else{const n=document.getElementById("openingSection");if(n){const t=n.getBoundingClientRect();t.top<window.innerHeight&&t.bottom>0?D.acquire("opening","opening-canvas",H,St):window.scrollY<window.innerHeight*2&&Nt()}const e=document.getElementById("playgroundSection");if(e){const t=e.getBoundingClientRect();t.top<window.innerHeight&&t.bottom>0&&pt()}typeof ScrollTrigger<"u"&&ScrollTrigger.refresh()}});window.__cdnReady?window.__cdnReady.then(()=>{if(typeof gsap<"u"&&typeof ScrollTrigger<"u")gsap.registerPlugin(ScrollTrigger);else{console.warn("GSAP not loaded — scroll choreography disabled");return}if(typeof Lenis<"u"){const n=new Lenis;n.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>n.raf(e*1e3)),gsap.ticker.lagSmoothing(0)}ht&&(ht.disconnect(),ht=null),je(),ye(D),me(),be(D),Se(D,Nt),Me(D),Pe(D,et),we(D),xe(D),Ee(D),Le(),$e(),fe(),ve(),Ie(et),Ce(D,et),Te(D),Fe(D),Re(),ScrollTrigger.create({trigger:"#energySection",start:"top 80%",end:"bottom top",onEnter:()=>{const n=D.get("energyCard");rt&&n&&rt.setAdapter(document.getElementById("energyCard"),n)}})}):console.warn("CDN loader not available — scroll choreography disabled");
//# sourceMappingURL=site-CQP1ndtJ.js.map
