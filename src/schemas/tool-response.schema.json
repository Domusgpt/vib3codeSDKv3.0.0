{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://vib3.dev/schemas/tool-response.json",
  "title": "VIB3+ Tool Response Schema",
  "description": "Semantically rich response format for agentic API tools",
  "type": "object",
  "properties": {
    "success": {
      "type": "boolean",
      "description": "Whether the operation succeeded"
    },
    "operation": {
      "type": "string",
      "description": "The operation that was performed",
      "enum": [
        "create_4d_visualization",
        "set_rotation",
        "set_visual_parameters",
        "switch_system",
        "change_geometry",
        "get_state",
        "randomize_parameters",
        "reset_parameters",
        "save_to_gallery",
        "load_from_gallery",
        "search_geometries",
        "get_parameter_schema",
        "render_preview",
        "export_state",
        "import_state"
      ]
    },
    "scene_id": {
      "type": "string",
      "pattern": "^scene_[a-z0-9]+$",
      "description": "Unique scene identifier"
    },
    "geometry": {
      "type": "object",
      "properties": {
        "index": {
          "type": "integer",
          "minimum": 0,
          "maximum": 23
        },
        "base_type": {
          "type": "string",
          "enum": ["tetrahedron", "hypercube", "sphere", "torus", "klein_bottle", "fractal", "wave", "crystal"]
        },
        "core_type": {
          "type": "string",
          "enum": ["base", "hypersphere", "hypertetrahedron"]
        },
        "vertex_count": {
          "type": "integer",
          "minimum": 4
        },
        "edge_count": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "rotation_state": {
      "type": "object",
      "properties": {
        "XY": { "type": "number" },
        "XZ": { "type": "number" },
        "YZ": { "type": "number" },
        "XW": { "type": "number" },
        "YW": { "type": "number" },
        "ZW": { "type": "number" }
      }
    },
    "render_info": {
      "type": "object",
      "properties": {
        "complexity": {
          "type": "string",
          "enum": ["low", "medium", "high", "very_high"]
        },
        "estimated_fps": {
          "type": "integer",
          "minimum": 1,
          "maximum": 144
        },
        "gpu_memory_mb": {
          "type": "number",
          "minimum": 0
        }
      }
    },
    "preview": {
      "type": "object",
      "properties": {
        "available": {
          "type": "boolean"
        },
        "format": {
          "type": "string",
          "enum": ["png", "jpeg"]
        },
        "quality": {
          "type": "number",
          "minimum": 0.1,
          "maximum": 1
        },
        "method": {
          "type": "string"
        },
        "data_url": {
          "type": ["string", "null"]
        },
        "note": {
          "type": "string"
        }
      }
    },
    "state_snapshot": {
      "type": ["object", "null"],
      "description": "Optional state snapshot attached to preview responses"
    },
    "suggested_next_actions": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "apply_rotation",
          "set_material",
          "render_preview",
          "export_image",
          "switch_system",
          "change_geometry",
          "adjust_visual_params",
          "save_to_gallery"
        ]
      },
      "description": "Contextually relevant actions the agent might take next"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "duration_ms": {
      "type": "number",
      "minimum": 0,
      "description": "Operation duration in milliseconds"
    }
  },
  "required": ["success", "operation"],
  "additionalProperties": false
}
