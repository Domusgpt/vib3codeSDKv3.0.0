{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://vib3.dev/schemas/tool-response.json",
  "title": "VIB3+ Tool Response Schema",
  "description": "Semantically rich response format for agentic API tools",
  "type": "object",
  "properties": {
    "success": {
      "type": "boolean",
      "description": "Whether the operation succeeded"
    },
    "operation": {
      "type": "string",
      "description": "The operation that was performed",
      "enum": [
        "create_visualization",
        "set_parameters",
        "get_state",
        "render_preview",
        "search_geometries",
        "switch_system",
        "randomize",
        "reset",
        "export_state",
        "import_state",
        "create_4d_visualization",
        "set_rotation",
        "set_visual_parameters",
        "change_geometry",
        "randomize_parameters",
        "reset_parameters",
        "save_to_gallery",
        "load_from_gallery",
        "get_parameter_schema",
        "list_tools"
      ]
    },
    "scene_id": {
      "type": "string",
      "pattern": "^scene_[a-z0-9]+$",
      "description": "Unique scene identifier"
    },
    "geometry": {
      "type": "object",
      "properties": {
        "index": {
          "type": "integer",
          "minimum": 0,
          "maximum": 23
        },
        "base_type": {
          "type": "string",
          "enum": ["tetrahedron", "hypercube", "sphere", "torus", "klein_bottle", "fractal", "wave", "crystal"]
        },
        "core_type": {
          "type": "string",
          "enum": ["base", "hypersphere", "hypertetrahedron"]
        },
        "vertex_count": {
          "type": "integer",
          "minimum": 4
        },
        "edge_count": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "rotation_state": {
      "type": "object",
      "properties": {
        "XY": { "type": "number" },
        "XZ": { "type": "number" },
        "YZ": { "type": "number" },
        "XW": { "type": "number" },
        "YW": { "type": "number" },
        "ZW": { "type": "number" }
      }
    },
    "render_info": {
      "type": "object",
      "properties": {
        "complexity": {
          "type": "string",
          "enum": ["low", "medium", "high", "very_high"]
        },
        "estimated_fps": {
          "type": "integer",
          "minimum": 1,
          "maximum": 144
        },
        "gpu_memory_mb": {
          "type": "number",
          "minimum": 0
        }
      }
    },
    "suggested_next_actions": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Contextually relevant actions the agent might take next"
    },
    "error": {
      "$ref": "https://vib3.dev/schemas/error.json"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "duration_ms": {
      "type": "number",
      "minimum": 0,
      "description": "Operation duration in milliseconds"
    },
    "validation_errors": {
      "type": "array",
      "items": {
        "type": "object"
      },
      "description": "Schema validation errors, if any"
    }
  },
  "required": ["success", "operation"],
  "additionalProperties": true
}
